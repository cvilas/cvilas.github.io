<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>POSIX Utilities Package 2.2: TCPClientServer.hpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6 -->
<div class="tabs">
  <ul>
    <li><a href="index.htm"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.htm"><span>Classes</span></a></li>
    <li id="current"><a href="files.htm"><span>Files</span></a></li>
  </ul></div>
<h1>TCPClientServer.hpp</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00002"></a>00002 <span class="preprocessor">#ifndef _TCPCLIENTSERVER_HPP_INCLUDED</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span><span class="preprocessor">#define _TCPCLIENTSERVER_HPP_INCLUDED</span>
<a name="l00004"></a>00004 <span class="preprocessor"></span>
<a name="l00005"></a>00005 <span class="preprocessor">#include &lt;sys/time.h&gt;</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include &lt;sys/types.h&gt;</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include &lt;sys/socket.h&gt;</span>
<a name="l00008"></a>00008 <span class="preprocessor">#include &lt;netinet/in.h&gt;</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include &lt;netinet/tcp.h&gt;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &lt;arpa/inet.h&gt;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;netdb.h&gt;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include &lt;errno.h&gt;</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &lt;malloc.h&gt;</span>
<a name="l00016"></a>00016 <span class="preprocessor">#include &lt;unistd.h&gt;</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include &lt;signal.h&gt;</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &lt;fcntl.h&gt;</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="preprocessor">#include "StatusReport.hpp"</span>
<a name="l00021"></a>00021 
<a name="l00046"></a><a class="code" href="classTCPServer.htm">00046</a> <span class="keyword">class </span><a class="code" href="classTCPServer.htm">TCPServer</a>
<a name="l00047"></a>00047 {
<a name="l00048"></a>00048   <span class="keyword">public</span>:
<a name="l00049"></a>00049     <a class="code" href="classTCPServer.htm#3a5e3cfe42c676ed71f2bc58dcc92bda">TCPServer</a>();
<a name="l00053"></a>00053     <a class="code" href="classTCPServer.htm#3a5e3cfe42c676ed71f2bc58dcc92bda">TCPServer</a>(<span class="keywordtype">int</span> port, <span class="keywordtype">int</span> maxMsgSize=1024, <span class="keywordtype">int</span> bdp=0);
<a name="l00069"></a>00069     <span class="keyword">virtual</span> <a class="code" href="classTCPServer.htm#00bff081482e5b8b88866c6280ed4f1d">~TCPServer</a>();
<a name="l00073"></a>00073     <span class="keywordtype">int</span> <a class="code" href="classTCPServer.htm#38797e7b50f88497d989201eac42452a">init</a>(<span class="keywordtype">int</span> port, <span class="keywordtype">int</span> maxMsgSize, <span class="keywordtype">int</span> bdp=0);
<a name="l00083"></a>00083     <span class="keywordtype">void</span> <a class="code" href="classTCPServer.htm#d8b7a73b33a92411a46810477caf5acb">doMessageCycle</a>();
<a name="l00091"></a>00091     <span class="keywordtype">int</span> <a class="code" href="classTCPServer.htm#5643abe77d3c9ee29a0d7a5c3ace2820">getStatusCode</a>() <span class="keyword">const</span>;
<a name="l00095"></a>00095     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classTCPServer.htm#349bbfe1d4dcff2c2983b71a62a2191e">getStatusMessage</a>() <span class="keyword">const</span>;
<a name="l00099"></a>00099     <span class="keywordtype">int</span> <a class="code" href="classTCPServer.htm#4cd989724362688ef8a96a7d12bcf211">enableIgnoreSigPipe</a>();
<a name="l00105"></a>00105     <span class="keywordtype">int</span> <a class="code" href="classTCPServer.htm#2d8dacef1dc6f7409d64b8da7df38528">disableIgnoreSigPipe</a>();
<a name="l00111"></a>00111   <span class="keyword">protected</span>:  
<a name="l00112"></a>00112     <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classTCPServer.htm#ae587de263d9648993d83580e4784c4b">receiveAndReply</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *inMsgBuf, <span class="keywordtype">int</span> inMsgLen, <span class="keywordtype">int</span> *outMsgLen); 
<a name="l00130"></a>00130   <span class="keyword">private</span>:
<a name="l00131"></a>00131     <span class="keywordtype">void</span> setError(<span class="keywordtype">int</span> code, <span class="keyword">const</span> <span class="keywordtype">char</span> *functionName);
<a name="l00137"></a>00137     <span class="keywordtype">int</span> d_fd;
<a name="l00141"></a>00141     <span class="keywordtype">char</span> *d_rcvBuf;
<a name="l00145"></a>00145     <span class="keywordtype">int</span> d_rcvBufSize;
<a name="l00149"></a>00149     <span class="keywordtype">bool</span> d_init;
<a name="l00153"></a>00153     <a class="code" href="classStatusReport.htm">StatusReport</a> d_status;
<a name="l00156"></a>00156 };
<a name="l00157"></a>00157 
<a name="l00158"></a>00158 
<a name="l00180"></a><a class="code" href="classTCPClient.htm">00180</a> <span class="keyword">class </span><a class="code" href="classTCPClient.htm">TCPClient</a>
<a name="l00181"></a>00181 {
<a name="l00182"></a>00182   <span class="keyword">public</span>:
<a name="l00183"></a>00183     <a class="code" href="classTCPClient.htm#d37bba4f2ebcc899b9871656802dcbe9">TCPClient</a>();
<a name="l00187"></a>00187     <a class="code" href="classTCPClient.htm#d37bba4f2ebcc899b9871656802dcbe9">TCPClient</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *serverIp, <span class="keywordtype">int</span> port, <span class="keyword">struct</span> timeval &amp;timeout, <span class="keywordtype">int</span> bdp=0);
<a name="l00210"></a>00210     <a class="code" href="classTCPClient.htm#869a5b3319ca562d03cb4c59ebec4407">~TCPClient</a>();
<a name="l00214"></a>00214     <span class="keywordtype">int</span> <a class="code" href="classTCPClient.htm#c8bbc37fc7576bcc12d133f629cb0238">init</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *serverIp, <span class="keywordtype">int</span> port, <span class="keyword">struct</span> timeval &amp;timeout, <span class="keywordtype">int</span> bdp=0);
<a name="l00236"></a>00236     <span class="keywordtype">int</span> <a class="code" href="classTCPClient.htm#6bc662e4e3381751249c0e18fb39265e">sendAndReceive</a>(<span class="keywordtype">char</span> *outMsgBuf, <span class="keywordtype">int</span> outMsgLen, <span class="keywordtype">char</span> *inMsgBuf,
<a name="l00237"></a>00237                                           <span class="keywordtype">int</span> inBufLen, <span class="keywordtype">int</span> *inMsgLen);
<a name="l00258"></a>00258     <span class="keywordtype">int</span> <a class="code" href="classTCPClient.htm#34e0bcabec00d67128098f8ff74055e1">getStatusCode</a>() <span class="keyword">const</span>;
<a name="l00262"></a>00262     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classTCPClient.htm#7ab28c1741fbcb7c4d2cdc693960b426">getStatusMessage</a>() <span class="keyword">const</span>;
<a name="l00266"></a>00266     <span class="keywordtype">int</span> <a class="code" href="classTCPClient.htm#0178b2a6ee653e5650bdeaf2f0b3e9dd">enableIgnoreSigPipe</a>();
<a name="l00272"></a>00272     <span class="keywordtype">int</span> <a class="code" href="classTCPClient.htm#d984f1bac894b8d69c5217555bcc71c0">disableIgnoreSigPipe</a>();
<a name="l00278"></a>00278   <span class="keyword">private</span>:
<a name="l00279"></a>00279     <span class="keywordtype">void</span> setError(<span class="keywordtype">int</span> code, <span class="keyword">const</span> <span class="keywordtype">char</span> *functionName);
<a name="l00285"></a>00285     <span class="keyword">struct </span>sockaddr_in d_server;
<a name="l00289"></a>00289     <span class="keywordtype">char</span> *d_serverName;
<a name="l00293"></a>00293     <span class="keywordtype">int</span> d_serverPort;
<a name="l00297"></a>00297     <span class="keywordtype">int</span> d_fd;
<a name="l00301"></a>00301     <span class="keywordtype">int</span> d_bdp;
<a name="l00305"></a>00305     <span class="keyword">struct </span>timeval d_recvTimeout;
<a name="l00309"></a>00309     <span class="keywordtype">bool</span> d_init;
<a name="l00313"></a>00313     <a class="code" href="classStatusReport.htm">StatusReport</a> d_status;
<a name="l00317"></a>00317 };
<a name="l00318"></a>00318 <span class="preprocessor">#endif // _TCPCLIENTSERVER_HPP_INCLUDED</span>
</pre></div><hr>
Created for project <code><font color="red"><b>POSIX Utilities Package</b></font></code> on Sat Aug 26 17:12:56 EDT 2006
<br>
 for Vilas Kumar Chitrakaran (cvilas(@)ces.clemson.edu). 
<br>
Documentation generated using <a href=http://www.doxygen.org>Doxygen</a>
.
</body>
</html>
