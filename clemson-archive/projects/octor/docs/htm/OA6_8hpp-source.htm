<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Octarm VI On-board Control System: OA6.hpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6 -->
<div class="tabs">
  <ul>
    <li><a href="index.htm"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.htm"><span>Classes</span></a></li>
    <li id="current"><a href="files.htm"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.htm"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.htm"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>OA6.hpp</h1><a href="OA6_8hpp.htm">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001   
<a name="l00002"></a>00002 
<a name="l00003"></a>00003 <span class="preprocessor">#ifndef INCLUDED_OA6_hpp</span>
<a name="l00004"></a>00004 <span class="preprocessor"></span><span class="preprocessor">#define INCLUDED_OA6_hpp</span>
<a name="l00005"></a>00005 <span class="preprocessor"></span>
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 
<a name="l00008"></a>00008 <span class="preprocessor">#include "<a class="code" href="Octor_8hpp.htm">Octor.hpp</a>"</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include "<a class="code" href="OA6Model_8hpp.htm">OA6Model.hpp</a>"</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include "<a class="code" href="OA6TraGen_8hpp.htm">OA6TraGen.hpp</a>"</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include "<a class="code" href="OA6PIDControl_8hpp.htm">OA6PIDControl.hpp</a>"</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include "ControlProgram.hpp"</span>
<a name="l00013"></a>00013 <span class="preprocessor">#ifdef USE_MOTIONMIND</span>
<a name="l00014"></a>00014 <span class="preprocessor"></span><span class="preprocessor">  #include "MotionMind/MMClientServer.hpp"</span>
<a name="l00015"></a>00015 <span class="preprocessor">#endif</span>
<a name="l00016"></a>00016 <span class="preprocessor"></span><span class="preprocessor">#include "Demux4Bit/Demux4BitClientServer.hpp"</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include "QMath/Vector.hpp"</span> 
<a name="l00018"></a>00018 <span class="preprocessor">#include "BinObserver.hpp"</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include "QMath/LowpassFilter.hpp"</span>
<a name="l00020"></a>00020   
<a name="l00091"></a><a class="code" href="classOA6.htm">00091</a> <span class="keyword">class </span><a class="code" href="classOA6.htm">OA6</a> : <span class="keyword">public</span> ControlProgram, <span class="keyword">public</span> <a class="code" href="classSubSystem.htm">SubSystem</a>
<a name="l00092"></a>00092 {
<a name="l00093"></a>00093   <span class="keyword">public</span>:
<a name="l00094"></a>00094     <a class="code" href="classOA6.htm#d6774b50f066a1b6534eb2a0e9ebcc55">OA6</a>();
<a name="l00098"></a>00098     <span class="keyword">virtual</span> <a class="code" href="classOA6.htm#95e2c8a2e0abb67eaf00736c25506e98">~OA6</a>();
<a name="l00104"></a>00104     <span class="keywordtype">int</span> <a class="code" href="classOA6.htm#25fcbccab6ec4d1a91302c385b27466f">setDesiredSuction</a>( <span class="keywordtype">double</span> eff);
<a name="l00110"></a>00110     <span class="keywordtype">int</span> <a class="code" href="classOA6.htm#c46db9f07cf50fc6cc0e718e583b9218">setDesiredLedPower</a>(<span class="keywordtype">int</span> p);
<a name="l00116"></a>00116     <span class="keywordtype">int</span> <a class="code" href="classOA6.htm#163ceefa840a1e25841bfb094c5d7992">setDesiredPosition</a>( Vector&lt;10&gt; &amp;position );
<a name="l00124"></a>00124     <span class="keywordtype">void</span> <a class="code" href="classOA6.htm#28641863aaaf9cae1ee1e21aac618b23">setTraGen</a>(<a class="code" href="classOA6TraGen.htm">OA6TraGen</a> *tg);
<a name="l00134"></a>00134     <span class="keywordtype">double</span> <a class="code" href="classOA6.htm#dc67302912bc7628529e2ee10f3326b2">getBatteryVoltage</a>();
<a name="l00138"></a>00138     <span class="keywordtype">double</span> <a class="code" href="classOA6.htm#1dacfa089e88cad533c534693ff8006c">getSuctionEffort</a>();
<a name="l00142"></a>00142     <span class="keywordtype">int</span> <a class="code" href="classOA6.htm#ec4658535456bcc27b3a80bbd6b1aadd">getLedPowerLevel</a>();
<a name="l00146"></a>00146     Vector&lt;16&gt; <a class="code" href="classOA6.htm#2bc93fb64816336bf73a0f58f631641b">getEnvSensorData</a>();
<a name="l00150"></a>00150     Vector&lt;10&gt; <a class="code" href="classOA6.htm#e424078307d53da0abbe8bf493a40056">getDesiredPosition</a>();
<a name="l00154"></a>00154     Vector&lt;10&gt; <a class="code" href="classOA6.htm#6b6fbdfd4f78b7e90540398674efb89d">getCurrentPosition</a>();
<a name="l00158"></a>00158     Vector&lt;10&gt; <a class="code" href="classOA6.htm#d43c03178c8e02fd5d560d83c422872a">getCurrentVelocity</a>();
<a name="l00162"></a>00162     Vector&lt;10&gt; <a class="code" href="classOA6.htm#db4be22a5c2be0a4d201a1db10f63888">getActuatorEffort</a>();
<a name="l00168"></a>00168     <span class="keywordtype">void</span> <a class="code" href="classOA6.htm#51b98c11bef266f9d3a4c208adaf36e0">calibrate</a>(Vector&lt;10&gt; &amp;position);
<a name="l00176"></a>00176     <span class="keywordtype">void</span> <a class="code" href="classOA6.htm#6554ab844752604e2838fc9a9f85983e">enableArmPower</a>();
<a name="l00180"></a>00180     <span class="keywordtype">void</span> <a class="code" href="classOA6.htm#d778fda505339aa76d50a6ed5331cbe5">disableArmPower</a>();
<a name="l00184"></a>00184     <span class="keywordtype">bool</span> <a class="code" href="classOA6.htm#497352635a6601fe562d4210c1ae25ef">isArmPowerEnabled</a>();
<a name="l00190"></a>00190     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classOA6.htm#232678f6f744aae97de8f9ec9a799f78">reset</a>();
<a name="l00194"></a>00194     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classOA6.htm#c5d606ea506a04ffd08fcaaf815ca74f">startShutdown</a>();
<a name="l00199"></a>00199     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classOA6.htm#5632e2ca7f72cd0f7c8d4f10f67f6857">shutdown</a>();
<a name="l00206"></a>00206     <span class="keywordtype">int</span> <a class="code" href="classOA6.htm#78a25f320b8e73e166e99670e37535a2">setSimulationModeOn</a>();
<a name="l00211"></a>00211     <span class="keywordtype">int</span> <a class="code" href="classOA6.htm#26dc3ce4fc3725c8321e15b559c92da3">setSimulationModeOff</a>();
<a name="l00217"></a>00217     <span class="keywordtype">bool</span> <a class="code" href="classOA6.htm#5d21f8d2737d84d5c665d9dc62c06c56">isSimulationModeOn</a>();
<a name="l00222"></a>00222     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classOA6.htm#e87811431a701b493f48a343a5c2242c">isRunning</a>();
<a name="l00226"></a>00226     ControlProgram *<a class="code" href="classOA6.htm#d173b6fe84801c785dbdc4d962d2f6f6">getQmotorControlProgram</a>();
<a name="l00230"></a>00230   <span class="keyword">protected</span>: 
<a name="l00231"></a>00231 
<a name="l00232"></a>00232       
<a name="l00233"></a>00233     <span class="keywordtype">void</span> <a class="code" href="classOA6.htm#91910f363eac341c8a38e38385704857">releaseAirPressure</a>();
<a name="l00240"></a>00240     <span class="keywordtype">bool</span> <a class="code" href="classOA6.htm#83c59d3a5a3e2336ae41a510b2a4dabf">isPositionWithinLimits</a>(Vector&lt;10&gt; &amp;pos, <span class="keywordtype">int</span> &amp;actuatorMask);
<a name="l00248"></a>00248     <span class="keywordtype">bool</span> <a class="code" href="classOA6.htm#e20efea4e6daf17ab9fc46738d1ab17d">isActuatorEffortWithinLimits</a>(Vector&lt;10&gt; &amp;press, <span class="keywordtype">int</span> &amp;actuatorMask);
<a name="l00256"></a>00256     <span class="keywordtype">bool</span> <a class="code" href="classOA6.htm#e3682a718c0fe6895d7e90960ce405cb">isActuatorFailed</a>(Vector&lt;10&gt; &amp;desiredEffort, Vector&lt;10&gt; &amp;currentEffort, 
<a name="l00257"></a>00257               <span class="keywordtype">int</span> &amp;actuatorMask);
<a name="l00268"></a>00268     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classOA6.htm#210574485ca9cf4e432722208935614c">onControlProgramError</a>(<span class="keywordtype">int</span> errorCode );
<a name="l00273"></a>00273     <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classOA6.htm#9784e2b5d5ad799949bd76a746f8dc4b">readConfiguration</a>();
<a name="l00278"></a>00278     <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classOA6.htm#0fffcc0af02822896eb3505e9ff49730">enterControl</a>();
<a name="l00284"></a>00284     <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classOA6.htm#57e8621f7f638718601d8eeeac3ff283">startControl</a>();
<a name="l00291"></a>00291     <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classOA6.htm#c8ded96bc2a3179414e19efa23beec28">control</a>();
<a name="l00297"></a>00297     <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classOA6.htm#a32a1fd6ef68c0f54a4015fa0be6ef3a">stopControl</a>();
<a name="l00302"></a>00302     <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classOA6.htm#ab34be3d8e53b8ad07ed15d05978b275">exitControl</a>();
<a name="l00307"></a>00307     <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classOA6.htm#e8a027aa1341010ad743eb52097efc64">handleMessage</a>(pid_t pid, <span class="keywordtype">char</span> *<a class="code" href="classOA6.htm#82ea0d3ab9399730f3d39d5d0526fcb7">message</a>);
<a name="l00314"></a>00314   <span class="keyword">protected</span>:
<a name="l00315"></a>00315 
<a name="l00316"></a>00316     <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classOA6.htm#4687b48d503f8f12705ff2281ed590ce">localInit</a>();
<a name="l00322"></a>00322     <span class="keywordtype">int</span> <a class="code" href="classOA6.htm#2bbc46956faa0cb6cb7961489f128d5f">registerQmotorParameters</a>(ControlProgram *cp);
<a name="l00371"></a>00371     <span class="keywordtype">int</span> <a class="code" href="classOA6.htm#2562d591c87d3de03060e327cdc90632">readGlobalConfiguration</a>();
<a name="l00387"></a>00387       <span class="keywordtype">int</span> <a class="code" href="classOA6.htm#af5e7f16f79fdb4eddeaf29423728caa">readEnvSensors</a>(Vector&lt;16&gt; &amp;e);
<a name="l00393"></a>00393     <span class="keywordtype">int</span> <a class="code" href="classOA6.htm#6a36fbaeeaa2321695bd5a7b7d3ab2ed">readBatteryVoltage</a>(<span class="keywordtype">double</span> &amp;b);
<a name="l00399"></a>00399       <span class="keywordtype">int</span> <a class="code" href="classOA6.htm#411f205428b9db30dc2f8276778d6c69">readActuatorPosition</a>(Vector&lt;10&gt; &amp;l);
<a name="l00406"></a>00406     <span class="keywordtype">int</span> <a class="code" href="classOA6.htm#752e6c50d228bad000acfdd6c6ea8a38">readActuatorEffort</a>(Vector&lt;10&gt; &amp;actuators, <span class="keywordtype">double</span> &amp;sucker);
<a name="l00414"></a><a class="code" href="classOA6.htm#2fdf1cdaf97ba6719c4b885535802201">00414</a>     <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="classOA6.htm#2fdf1cdaf97ba6719c4b885535802201">_message</a> <span class="comment">// messages to qmotor thread.</span>
<a name="l00415"></a>00415     {
<a name="l00416"></a>00416       <a class="code" href="classOA6.htm#2fdf1cdaf97ba6719c4b885535802201f6fb7d3a75129a91b7c070bf56c8767d">message_init</a> = 100,                 <span class="comment">// initial msg. does nothing.</span>
<a name="l00417"></a>00417       <a class="code" href="classOA6.htm#2fdf1cdaf97ba6719c4b8855358022011651e71fb05333ca44ee30acc26c8c33">message_reset</a>,
<a name="l00418"></a>00418       <a class="code" href="classOA6.htm#2fdf1cdaf97ba6719c4b885535802201374e664af381da8655af1bd5c6a94e2a">message_getPosition</a>,
<a name="l00419"></a>00419       <a class="code" href="classOA6.htm#2fdf1cdaf97ba6719c4b885535802201cbfdbe3f1a2bfdabf8a1b068cb079e1e">message_getVelocity</a>,
<a name="l00420"></a>00420       <a class="code" href="classOA6.htm#2fdf1cdaf97ba6719c4b8855358022013beb3bb7e58635f4c8837c65ecd1509c">message_getActuatorEffort</a>,
<a name="l00421"></a>00421       <a class="code" href="classOA6.htm#2fdf1cdaf97ba6719c4b8855358022015ba2add293de9b78ba2bb9b283e9f548">message_getDesiredPosition</a>,
<a name="l00422"></a>00422       <a class="code" href="classOA6.htm#2fdf1cdaf97ba6719c4b88553580220134b90ec064d07aa075fd2292772f6848">message_getEnvSensorData</a>,
<a name="l00423"></a>00423       <a class="code" href="classOA6.htm#2fdf1cdaf97ba6719c4b885535802201e4974a69ab0254dd5d0d7853d27dae3d">message_setDesiredPosition</a>,
<a name="l00424"></a>00424       <a class="code" href="classOA6.htm#2fdf1cdaf97ba6719c4b885535802201b6bad3fbe654b46aa7a7de73fcc5d128">message_setPosition</a>,
<a name="l00425"></a>00425       <a class="code" href="classOA6.htm#2fdf1cdaf97ba6719c4b88553580220195bda38ae38ccc89336e3645091ffb97">message_setTraGen</a>
<a name="l00426"></a>00426     }message;
<a name="l00427"></a>00427   
<a name="l00428"></a>00428 };
<a name="l00429"></a>00429 <span class="preprocessor">#ifdef USE_MOTIONMIND</span>
<a name="l00430"></a>00430 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00431"></a>00431 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
</pre></div><hr>
Created for project <code><font color="red"><b>Octarm VI On-board Control System</b></font></code> on Fri Apr 14 21:18:14 EDT 2006
<br>
 for Vilas Kumar Chitrakaran (cvilas(@)ces.clemson.edu). 
<br>
Documentation generated using <a href=http://www.doxygen.org>Doxygen</a>
.
</body>
</html>
