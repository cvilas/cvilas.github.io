<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Status Class Reference</title>
<link href="stylesheet.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.3 on Thu Jul 19 13:03:35 2001 -->
<h1>Status  Class Reference</h1>Allows to stack error codes and status messages. 
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="Status_hpp-source.html">Status.hpp</a>&gt;</code>
<p>
<a href="class_Status-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="class_Status.html#a0">Status</a> (int maxNumErrors = 10)</td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="class_Status.html#a1">~Status</a> ()</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_Status.html#a2">setStatusOk</a> ()</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="class_Status.html#a3">isStatusOk</a> ()</td></tr>
<tr><td nowrap align=right valign=top>strstream&amp;&nbsp;</td><td valign=bottom><a class="el" href="class_Status.html#a4">setStatusError</a> (int code = e_error)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="class_Status.html#a5">isStatusError</a> ()</td></tr>
<tr><td nowrap align=right valign=top>const char*&nbsp;</td><td valign=bottom><a class="el" href="class_Status.html#a6">getMessageText</a> (void)</td></tr>
<tr><td nowrap align=right valign=top>char*&nbsp;</td><td valign=bottom><a class="el" href="class_Status.html#a7">popMessage</a> (int *code)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="class_Status.html#a8">getStatusErrorCode</a> ()</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="class_Status.html#a9">getOverflow</a> (void)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="class_Status.html#a10">getErrorCount</a> (void)</td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Allows to stack error codes and status messages.
<p>
The Status class provides for the ability to set and retrieve error messages. Errors are stored on an error stack. The first error in is the last one out. Errors consist of an optional error code and an optional message. If no error code is specified, the default (e_error, or -1) is used. If no message is specified, only the code will be used.
<p>
For program related errors, please use the format: <div class="fragment"><pre>   ProgramName: [ClassName::MethodName()] [OptionalErrorCode] Message Text</div></pre>
<p>
For example: <div class="fragment"><pre>   qmotor: [MainWindow::readConfiguration()] Error opening configuration file</div></pre>
<p>
When getting the status messages (<a class="el" href="class_Status.html#a6">getMessageText</a>()), the debug version and the release version of the Status class behave differently: The debug version gets the whole message while the release version removes everything between the brackets []. The above message in the release  version would be cut down to: <div class="fragment"><pre>   qmotor: Error opening configuration file</div></pre>
<p>
<b>Example Program:</b>
<p>
<div class="fragment"><pre><font class="comment">//========================================================================</font>
<font class="comment">// Project: QRTS Utility Classes</font>
<font class="comment">// ----------------------------------------------------------------------</font>
<font class="comment">// Package: Status</font>
<font class="comment">// Authors: Nick Costescu, Markus Loffler</font>
<font class="comment">// ----------------------------------------------------------------------</font>
<font class="comment">// File: Status.t.cpp</font>
<font class="comment">// Example program for the Status class.</font>
<font class="comment">//========================================================================</font>

<font class="preprocessor">#include "Status.hpp"</font>

<font class="preprocessor">#include &lt;iostream.h&gt;</font>
<font class="preprocessor">#include &lt;fstream.h&gt;</font>
<font class="preprocessor">#include &lt;string.h&gt;</font>
<font class="preprocessor">#include &lt;stdio.h&gt;</font>
<font class="preprocessor">#include &lt;errno.h&gt;</font>



<font class="comment">//========================================================================</font>
<font class="comment">// loadNumbers</font>
<font class="comment">//========================================================================</font>

<font class="keywordtype">void</font> loadNumbers(<font class="keyword">const</font> <font class="keywordtype">char</font> *filename, <font class="keywordtype">double</font> *buffer, <font class="keywordtype">int</font> numNumbers,
                 <a class="code" href="class_Status.html">Status</a> &amp;status)<font class="keyword"></font>
<font class="keyword"></font>{
  ifstream file(filename);
  <font class="keywordflow">if</font> (!file)
  {
    status.<a class="code" href="class_Status.html#a4">setStatusError</a>()
      &lt;&lt; <font class="stringliteral">"Status.t: [loadNumbers()] Can't open the file "</font> &lt;&lt; filename
      &lt;&lt; <font class="stringliteral">" - "</font> &lt;&lt; strerror(errno) &lt;&lt; endl;
    <font class="keywordflow">return</font>;
  }
  
  <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; numNumbers; i++)
  {
    file &gt;&gt; buffer[i];
    <font class="keywordflow">if</font> (!file)
    {
      status.<a class="code" href="class_Status.html#a4">setStatusError</a>()
        &lt;&lt; <font class="stringliteral">"Status.t: [loadNumbers()] Error reading number "</font> &lt;&lt; i &lt;&lt; endl;
      <font class="keywordflow">return</font>;
    }
  }
}


<font class="comment">//========================================================================</font>
<font class="comment">// loadAndCheckNumbers</font>
<font class="comment">//========================================================================</font>

<font class="keywordtype">void</font> loadAndCheckNumbers(<font class="keyword">const</font> <font class="keywordtype">char</font> *filename, <font class="keywordtype">double</font> *buffer, <font class="keywordtype">int</font> numNumbers,
                         <a class="code" href="class_Status.html">Status</a> &amp;status)<font class="keyword"></font>
<font class="keyword"></font>{
  loadNumbers(filename, buffer, numNumbers, status);
  <font class="keywordflow">if</font> (status.<a class="code" href="class_Status.html#a5">isStatusError</a>())
  {
    status.<a class="code" href="class_Status.html#a4">setStatusError</a>()
      &lt;&lt; <font class="stringliteral">"Status.t: [loadAndCheckNumbers()] "</font>
      &lt;&lt; <font class="stringliteral">"Error loading the numbers."</font> &lt;&lt; endl;
    <font class="keywordflow">return</font>;
  }
  
  <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; 10; i++)
  {
    <font class="keywordflow">if</font> (buffer[i] &gt; 100)
    {
      status.<a class="code" href="class_Status.html#a4">setStatusError</a>()
        &lt;&lt; <font class="stringliteral">"Status.t: [loadAndCheckNumbers()] "</font>
        &lt;&lt; <font class="stringliteral">"Number too big ("</font> &lt;&lt; buffer[i] &lt;&lt; <font class="stringliteral">")"</font> &lt;&lt; endl;
      <font class="keywordflow">return</font>;
    }
  }
}


<font class="comment">//========================================================================</font>
<font class="comment">// main</font>
<font class="comment">//========================================================================</font>

<font class="keywordtype">int</font> main (<font class="keywordtype">int</font> argc, <font class="keywordtype">char</font> *argv[])<font class="keyword"></font>
<font class="keyword"></font>{
  <a class="code" href="class_Status.html">Status</a> status;

  <font class="keywordflow">if</font> (argc != 2)
  {
    cout &lt;&lt; <font class="stringliteral">"usage: Status.t &lt;filename&gt;"</font> &lt;&lt; endl;
    <font class="keywordflow">return</font> -1;
  }
  
  <font class="keywordtype">double</font> buffer[10];
  loadAndCheckNumbers(argv[1], buffer, 10, status);
  
  <font class="keywordflow">if</font> (status.<a class="code" href="class_Status.html#a5">isStatusError</a>())
  {
    cout &lt;&lt; <font class="stringliteral">"An error occured while loading and checking the numbers: "</font> &lt;&lt; endl
         &lt;&lt; status.<a class="code" href="class_Status.html#a6">getMessageText</a>();
    <font class="keywordflow">return</font> -1;
  }
  
  cout &lt;&lt; <font class="stringliteral">"Numbers successfully loaded and checked: "</font> &lt;&lt; endl;
  <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; 10; i++)
    cout &lt;&lt; buffer[i] &lt;&lt; endl;
  cout &lt;&lt; endl;

  <font class="keywordflow">return</font> 0;
}

</div></pre> 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a name="a0" doxytag="Status::Status"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
Status (
          </b></td>
          <td valign="bottom"><b>
int <em>maxNumErrors</em> = 10&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The constructor sets the status to Ok and defines the maximum number of stacked errors (default is 10) <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>maxNumErrors</em>
&nbsp;</td><td>
 The maximum number of stacked errors. </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a1" doxytag="Status::~Status"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
~Status (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The destructor cleans up memory.     </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a name="a2" doxytag="Status::setStatusOk"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void setStatusOk (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set the status to OK and clears all message texts, also zeros the overflow count and the error count.     </td>
  </tr>
</table>
<a name="a3" doxytag="Status::isStatusOk"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int isStatusOk (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Return non-zero if the status is ok. <dl compact><dt>
<b>Returns: </b><dd>
 1: Status is OK, 0: Status is not OK. </dl>    </td>
  </tr>
</table>
<a name="a4" doxytag="Status::setStatusError"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
strstream &amp; setStatusError (
          </b></td>
          <td valign="bottom"><b>
int <em>code</em> = e_error&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the status to error and returns a stream pointer that allows to add an error message (by using the &lt;&lt; operator). <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>code</em>
&nbsp;</td><td>
 Error code
<p>
</td></tr>
</table>
</dl><b>Example:</b>
<p>
<div class="fragment"><pre>       <a class="code" href="class_Status.html">Status</a> status;
       status.<a class="code" href="class_Status.html#a4">setStatusError</a>()
         &lt;&lt; <font class="stringliteral">"[MyClass:readFile()] Error reading file - "</font>
         &lt;&lt; strerror(errno) &lt;&lt; endl;</div></pre>     </td>
  </tr>
</table>
<a name="a5" doxytag="Status::isStatusError"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int isStatusError (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Return non-zero if there was a fatal error. <dl compact><dt>
<b>Returns: </b><dd>
 1: Status is ERROR, 0: Status is not ERROR. </dl>    </td>
  </tr>
</table>
<a name="a6" doxytag="Status::getMessageText"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
const char * getMessageText (
          </b></td>
          <td valign="bottom"><b>
void&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Creates a buffer with all of the error messages, in reverse order (because this is a stack based system). Each error message text is prefixed by the corresponding error code automatically. Be careful what you do with this pointer, it belongs to the Status class and may be deleted at any time (so either make a copy of the string or use it immediately and don't use it again.)
<p>
In the release version of this library, parts between brackets ([...]) are cut out (including the brackets and all following spaces). Use brackets for messages that should only appear in the debug version. If you still want to use brackets in the release version, use the quote character "\" in front of the brackets, e.g.  <div class="fragment"><pre>       d_status.setStatusError() &lt;&lt; <font class="stringliteral">"Error - can't find element a[\\10\\]"</font>;</div></pre>
<p>
<b>Example:</b> <div class="fragment"><pre>       <font class="keywordflow">if</font> (status.isStatusError ())
       {
         cout &lt;&lt; status.getErrorCount() &lt;&lt; <font class="stringliteral">" errors have occurred"</font> &lt;&lt; endl;
         cout &lt;&lt; status.getOverflow () &lt;&lt; <font class="stringliteral">" errors were lost"</font> &lt;&lt; endl;
      
         <font class="comment">// Prints out all the errors</font>
         cout &lt;&lt; status.getMessageText () &lt;&lt; endl; 
       }</div></pre>     </td>
  </tr>
</table>
<a name="a7" doxytag="Status::popMessage"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
char * popMessage (
          </b></td>
          <td valign="bottom"><b>
int * <em>code</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Return the most recent error code &amp; message. You must free the memory this function returns as the message. Pops the error off the error stack (next time you pop, you'll get another msg). Most users will just use <a class="el" href="class_Status.html#a6">getMessageText</a>() to get all msg text at once, but you can use this method to pop errors off the stack one by one. Note that the msgs are deleted from the stack when they're popped, but they're not deleted by <a class="el" href="class_Status.html#a6">getMessageText</a>().     </td>
  </tr>
</table>
<a name="a8" doxytag="Status::getStatusErrorCode"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int getStatusErrorCode (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the error code of the status on top of the error stack. <dl compact><dt>
<b>Returns: </b><dd>
 The error code of the status on top of the error stack. </dl>    </td>
  </tr>
</table>
<a name="a9" doxytag="Status::getOverflow"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int getOverflow (
          </b></td>
          <td valign="bottom"><b>
void&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the number of messages that were lost because the message buffer was full. <dl compact><dt>
<b>Returns: </b><dd>
 Number of overflow messages. </dl>    </td>
  </tr>
</table>
<a name="a10" doxytag="Status::getErrorCount"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int getErrorCount (
          </b></td>
          <td valign="bottom"><b>
void&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the number of error messages on the stack. <dl compact><dt>
<b>Returns: </b><dd>
 Number of messages on the stack. </dl>    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="Status_hpp-source.html">Status.hpp</a></ul>
</body>
</html>
