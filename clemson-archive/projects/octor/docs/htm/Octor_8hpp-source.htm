<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Octarm VI On-board Control System: Octor.hpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6 -->
<div class="tabs">
  <ul>
    <li><a href="index.htm"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.htm"><span>Classes</span></a></li>
    <li id="current"><a href="files.htm"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.htm"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.htm"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>Octor.hpp</h1><a href="Octor_8hpp.htm">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00002"></a>00002 <span class="preprocessor">#ifndef INCLUDED_Octor_hpp</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span><span class="preprocessor">#define INCLUDED_Octor_hpp</span>
<a name="l00004"></a>00004 <span class="preprocessor"></span>
<a name="l00005"></a>00005 <span class="preprocessor">#include "Config.hpp"</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include "putils/PtBarrier.hpp"</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include "CmdLineArgs.hpp"</span>
<a name="l00008"></a>00008 <span class="preprocessor">#include "Status.hpp"</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include "ControlProgram.hpp"</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &lt;list&gt;</span>
<a name="l00011"></a>00011 
<a name="l00012"></a>00012 
<a name="l00013"></a><a class="code" href="Octor_8hpp.htm#3631e93e6d4cebcbbd3c906b7e3e57b1">00013</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="Octor_8hpp.htm#3631e93e6d4cebcbbd3c906b7e3e57b1">_octarm_mode</a>
<a name="l00014"></a>00014 {
<a name="l00015"></a>00015   <a class="code" href="Octor_8hpp.htm#3631e93e6d4cebcbbd3c906b7e3e57b151cf76412faedd6e5054425fc14ede71">mode_armPowerOn</a>  = 0x01,  <span class="comment">// arm power enabled</span>
<a name="l00016"></a>00016   <a class="code" href="Octor_8hpp.htm#3631e93e6d4cebcbbd3c906b7e3e57b1504f9827094bb13e5f8ef61242d4fc3a">mode_hardwareOn</a>  = 0x02   <span class="comment">// hardware mode</span>
<a name="l00017"></a>00017 }<a class="code" href="Octor_8hpp.htm#a687c58f917de6a04cc99a888bed7f69">octarm_mode_t</a>;
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 
<a name="l00020"></a><a class="code" href="Octor_8hpp.htm#9d0ad1ca51d3c1967a12565bceba89b8">00020</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="Octor_8hpp.htm#9d0ad1ca51d3c1967a12565bceba89b8">_octarm_fault</a>
<a name="l00021"></a>00021 {
<a name="l00022"></a>00022   <a class="code" href="Octor_8hpp.htm#9d0ad1ca51d3c1967a12565bceba89b8e866ede1c56cce25c9544309489feb87">fault_none</a>            = 0x000000,   <span class="comment">// no faults</span>
<a name="l00023"></a>00023   <a class="code" href="Octor_8hpp.htm#9d0ad1ca51d3c1967a12565bceba89b89e92ac3697a83cb8a5f6e9e8ac4a3d22">fault_multipleInit</a>    = 0x000001,   <span class="comment">// multiple initialization</span>
<a name="l00024"></a>00024   <a class="code" href="Octor_8hpp.htm#9d0ad1ca51d3c1967a12565bceba89b844bfc7b395927fe070de766987b234c1">fault_globalConfig</a>    = 0x000002,   <span class="comment">// fault loading global configuration</span>
<a name="l00025"></a>00025   <a class="code" href="Octor_8hpp.htm#9d0ad1ca51d3c1967a12565bceba89b8602332adc138cf79f4ed9bf24a22012c">fault_signal</a>          = 0x000004,   <span class="comment">// SIGINT or some other signal received</span>
<a name="l00026"></a>00026   <a class="code" href="Octor_8hpp.htm#9d0ad1ca51d3c1967a12565bceba89b83ca38fc87d44fe2be268d3efceb3b687">fault_switchMode</a>      = 0x000008,   <span class="comment">// failure switching operating mode</span>
<a name="l00027"></a>00027   <a class="code" href="Octor_8hpp.htm#9d0ad1ca51d3c1967a12565bceba89b8e0eeed04113c5b61849afca3e64823df">fault_qmotorConnect</a>   = 0x000010,   <span class="comment">// failure connecting to QMotor thread</span>
<a name="l00028"></a>00028   <a class="code" href="Octor_8hpp.htm#9d0ad1ca51d3c1967a12565bceba89b8a49c2f8231411ff60fb1af56e5583550">fault_qmotorConfig</a>    = 0x000020,   <span class="comment">// error reading QMotor config file</span>
<a name="l00029"></a>00029   <a class="code" href="Octor_8hpp.htm#9d0ad1ca51d3c1967a12565bceba89b810fc4c05db962b77dbf965689ddf8f7e">fault_control</a>         = 0x000040,   <span class="comment">// error in QMotor control loop</span>
<a name="l00030"></a>00030   <a class="code" href="Octor_8hpp.htm#9d0ad1ca51d3c1967a12565bceba89b817c7d9a1a9ad1d5679015b7a31d134f7">fault_ioClientInit</a>    = 0x000080,   <span class="comment">// I/O board client init error</span>
<a name="l00031"></a>00031   <a class="code" href="Octor_8hpp.htm#9d0ad1ca51d3c1967a12565bceba89b89b203ebc9b28c35655e6ded7d84230fd">fault_ioClientConfig</a>  = 0x000100,   <span class="comment">// I/O board config error</span>
<a name="l00032"></a>00032   <a class="code" href="Octor_8hpp.htm#9d0ad1ca51d3c1967a12565bceba89b86463394f445ea6d192d3d15559279609">fault_ioClientConnect</a> = 0x000200,   <span class="comment">// I/O connection failure</span>
<a name="l00033"></a>00033   <a class="code" href="Octor_8hpp.htm#9d0ad1ca51d3c1967a12565bceba89b87e477770a865387ec9bc0daafbbedd6f">fault_effortLimit</a>     = 0x000400,   <span class="comment">// actuator torque,pressure limits exceeded</span>
<a name="l00034"></a>00034   <a class="code" href="Octor_8hpp.htm#9d0ad1ca51d3c1967a12565bceba89b822b9cdea71287b7cefc2492b887f786d">fault_positionLimit</a>   = 0x000800,   <span class="comment">// actuator position limits exceeded</span>
<a name="l00035"></a>00035   <a class="code" href="Octor_8hpp.htm#9d0ad1ca51d3c1967a12565bceba89b8367cda952fe9c8e6f75abc6d7895fc9f">fault_actuatorFailure</a> = 0x001000,   <span class="comment">// actuator failure</span>
<a name="l00036"></a>00036   <a class="code" href="Octor_8hpp.htm#9d0ad1ca51d3c1967a12565bceba89b8bcf841afe290f6e750ac1a06320f36f3">fault_lowBattery</a>      = 0x002000,   <span class="comment">// computer battery voltage low</span>
<a name="l00037"></a>00037   <a class="code" href="Octor_8hpp.htm#9d0ad1ca51d3c1967a12565bceba89b82ebdf01b1a56c8f78be28cb120ce0d29">fault_network</a>         = 0x004000,   <span class="comment">// network communication error</span>
<a name="l00038"></a>00038   <a class="code" href="Octor_8hpp.htm#9d0ad1ca51d3c1967a12565bceba89b81bd8366630ca5ac0b764f92829591ee5">fault_system</a>          = 0x008000,   <span class="comment">// OS or low level system fault</span>
<a name="l00039"></a>00039   <a class="code" href="Octor_8hpp.htm#9d0ad1ca51d3c1967a12565bceba89b8b2f5ca3e20751f677f552cd229335cd1">fault_unknown</a>         = 0x010000    <span class="comment">// unknown fault</span>
<a name="l00040"></a>00040 }<a class="code" href="Octor_8hpp.htm#f5c7949e50fcf3ef31a9f36a43b869a2">octarm_fault_t</a>;
<a name="l00041"></a>00041 
<a name="l00042"></a>00042 
<a name="l00043"></a><a class="code" href="struct__octarm__setpoint.htm">00043</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct__octarm__setpoint.htm">_octarm_setpoint</a>
<a name="l00044"></a>00044 {
<a name="l00045"></a><a class="code" href="struct__octarm__setpoint.htm#5185e42cd25d632f4ae8e807636e275e">00045</a>   <span class="keywordtype">float</span> <a class="code" href="struct__octarm__setpoint.htm#5185e42cd25d632f4ae8e807636e275e">position</a>[10]; <span class="comment">// actuator position (motor, 9 muscles)</span>
<a name="l00046"></a><a class="code" href="struct__octarm__setpoint.htm#c836d33370c7410006352b6442ab59f9">00046</a>   <span class="keywordtype">float</span> <a class="code" href="struct__octarm__setpoint.htm#c836d33370c7410006352b6442ab59f9">suction</a>;      <span class="comment">// sucker regulator pressure (0 - 120 psi)</span>
<a name="l00047"></a><a class="code" href="struct__octarm__setpoint.htm#cdc50acdfbc8eacf149a400159f2c6ef">00047</a>   <span class="keywordtype">char</span>  <a class="code" href="struct__octarm__setpoint.htm#cdc50acdfbc8eacf149a400159f2c6ef">mode</a>;         <span class="comment">// operating mode</span>
<a name="l00048"></a><a class="code" href="struct__octarm__setpoint.htm#54b74c6a7f148b47c9542bf21b0553eb">00048</a>   <span class="keywordtype">char</span>  <a class="code" href="struct__octarm__setpoint.htm#54b74c6a7f148b47c9542bf21b0553eb">light</a>;        <span class="comment">// nosecam light intensity (0 - 10)</span>
<a name="l00049"></a>00049 }<a class="code" href="struct__octarm__setpoint.htm">octarm_setpoint_t</a>;           
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 
<a name="l00052"></a><a class="code" href="struct__octarm__status.htm">00052</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct__octarm__status.htm">_octarm_status</a>
<a name="l00053"></a>00053 {
<a name="l00054"></a><a class="code" href="struct__octarm__status.htm#a17c540479618034dee3dabfe9618f32">00054</a>   <span class="keywordtype">int</span>           <a class="code" href="struct__octarm__status.htm#a17c540479618034dee3dabfe9618f32">fault</a>;            <span class="comment">// global faults</span>
<a name="l00055"></a><a class="code" href="struct__octarm__status.htm#a421e9fabae1efb813c6739b7839ca1b">00055</a>   <span class="keywordtype">float</span>         <a class="code" href="struct__octarm__status.htm#a421e9fabae1efb813c6739b7839ca1b">envSensors</a>[16];   <span class="comment">// reading from sensors on the arm</span>
<a name="l00056"></a><a class="code" href="struct__octarm__status.htm#38078325fae71324e2a5bf0fc02cc4b2">00056</a>   <span class="keywordtype">float</span>         <a class="code" href="struct__octarm__status.htm#38078325fae71324e2a5bf0fc02cc4b2">battery</a>;                     <span class="comment">// computer battery voltage</span>
<a name="l00057"></a><a class="code" href="struct__octarm__status.htm#564119fe79295407ee8b1b7f605562f3">00057</a>   <span class="keywordtype">float</span>         <a class="code" href="struct__octarm__status.htm#564119fe79295407ee8b1b7f605562f3">effort</a>[10];       <span class="comment">// actuator power level (motor, 9 muscles)</span>
<a name="l00058"></a><a class="code" href="struct__octarm__status.htm#ac5b494d4192430cde84fb70629ed764">00058</a>   <span class="keywordtype">float</span>         <a class="code" href="struct__octarm__status.htm#ac5b494d4192430cde84fb70629ed764">position</a>[10];     <span class="comment">// actuator position (motor, 9 muscles)</span>
<a name="l00059"></a><a class="code" href="struct__octarm__status.htm#b0287c998386c57ea20757954c936650">00059</a>   <span class="keywordtype">float</span>         <a class="code" href="struct__octarm__status.htm#b0287c998386c57ea20757954c936650">suction</a>;          <span class="comment">// suction regulator pressure (0 - 120 psi)</span>
<a name="l00060"></a><a class="code" href="struct__octarm__status.htm#e00efb3b2026309b92365413f257707f">00060</a>   <span class="keywordtype">char</span>          <a class="code" href="struct__octarm__status.htm#e00efb3b2026309b92365413f257707f">mode</a>;             <span class="comment">// operating mode</span>
<a name="l00061"></a><a class="code" href="struct__octarm__status.htm#34915784b30624a86edb61d437c7e3d6">00061</a>   <span class="keywordtype">char</span>          <a class="code" href="struct__octarm__status.htm#34915784b30624a86edb61d437c7e3d6">light</a>;            <span class="comment">// nosecam light intensity (0 - 10)</span>
<a name="l00062"></a>00062 }<a class="code" href="struct__octarm__status.htm">octarm_status_t</a>;           
<a name="l00063"></a>00063 
<a name="l00064"></a>00064 
<a name="l00074"></a><a class="code" href="classSubSystem.htm">00074</a> <span class="keyword">class </span><a class="code" href="classSubSystem.htm">SubSystem</a>
<a name="l00075"></a>00075 {
<a name="l00076"></a>00076   <span class="keyword">public</span>:
<a name="l00077"></a>00077     <a class="code" href="classSubSystem.htm#d0ad887ec27c07afb97d11cd76ddfcc7">SubSystem</a>(<span class="keywordtype">int</span> shutdownPriority, <span class="keyword">const</span> <span class="keywordtype">char</span> *desc=NULL);
<a name="l00086"></a>00086     <span class="keyword">virtual</span> <a class="code" href="classSubSystem.htm#a2558143d24ceede0155c54ca37c0e72">~SubSystem</a>();
<a name="l00092"></a>00092     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classSubSystem.htm#36b1a18f3f7c7ed6d711323d8419c4be">startShutdown</a>()  = 0;
<a name="l00099"></a>00099     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classSubSystem.htm#f6d0513ebd08b6483fbe82d4737db876">shutdown</a>()  = 0;
<a name="l00103"></a>00103     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classSubSystem.htm#77f3ab472adf93753104b019164668a7">isRunning</a>() = 0;
<a name="l00107"></a><a class="code" href="classSubSystem.htm#6f6fc7e851442cd7e64a67ac10040213">00107</a>     <span class="keywordtype">int</span> <a class="code" href="classSubSystem.htm#6f6fc7e851442cd7e64a67ac10040213">getShutdownPriority</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> d_shutdownPriority;}
<a name="l00111"></a><a class="code" href="classSubSystem.htm#6258b182e39ad1e38ce3d4f1521940c8">00111</a>     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classSubSystem.htm#6258b182e39ad1e38ce3d4f1521940c8">getDescription</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> d_desc;}
<a name="l00115"></a>00115     <span class="keyword">private</span>:
<a name="l00116"></a>00116       <span class="keywordtype">int</span> d_shutdownPriority;
<a name="l00117"></a>00117       <span class="keywordtype">char</span> d_desc[80];
<a name="l00118"></a>00118 };
<a name="l00119"></a>00119 
<a name="l00120"></a>00120 
<a name="l00126"></a><a class="code" href="classOctor.htm">00126</a> <span class="keyword">class </span><a class="code" href="classOctor.htm">Octor</a>
<a name="l00127"></a>00127 {
<a name="l00128"></a>00128   <span class="keyword">public</span>:
<a name="l00129"></a>00129     <a class="code" href="classOctor.htm#5592dc1f01946872051c48c20ccbf7d8">Octor</a>();
<a name="l00133"></a>00133     <a class="code" href="classOctor.htm#24a5049c1e1a277212c8058a0b905ff5">~Octor</a>();
<a name="l00138"></a>00138     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classOctor.htm#0d75c72cb826c4b44f71faef079ce360">setGlobalConfigFileName</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *file=<span class="stringliteral">"Octor.cfg"</span>);
<a name="l00143"></a>00143     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classOctor.htm#c74cb3316b6a40f18f45bb61a7307914">setQMotorConfigFileName</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *file=<span class="stringliteral">"Octarm6.cfg"</span>);
<a name="l00148"></a>00148     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classOctor.htm#98112aa25e0aa0d0081b6cb4485040a5">getGlobalConfigFileName</a>();
<a name="l00153"></a>00153     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classOctor.htm#1ea150785c072fd4405ad8e2e26f4739">getQMotorConfigFileName</a>();
<a name="l00158"></a>00158     <span class="keyword">static</span> Config *<a class="code" href="classOctor.htm#2bf21170297c0e58e4f72a64014f79ed">getGlobalConfig</a>();
<a name="l00162"></a>00162     <span class="keyword">static</span> CmdLineArgs *<a class="code" href="classOctor.htm#c25eb6a89bfefba6286b7e0b6039f4f0">getCmdLineArgs</a>();
<a name="l00168"></a>00168     <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classOctor.htm#57fadc784ca80bae88754ac260406b7e">s_faults</a>;
<a name="l00172"></a>00172     <span class="keyword">static</span> Status <a class="code" href="classOctor.htm#2adb39b390f0af3c453ff49c4a6079f2">s_globalStatus</a>;
<a name="l00176"></a>00176     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classOctor.htm#045bb9482206e854a44f2962a5df4ae5">init</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[]);
<a name="l00187"></a>00187     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classOctor.htm#0ceefa4f13fc63aeccfb74a2426d807e">addToSubSystemList</a>(<a class="code" href="classSubSystem.htm">SubSystem</a> *ss);
<a name="l00192"></a>00192     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classOctor.htm#94a435f611cbeae38780327db6444bb0">deleteFromSubSystemList</a>(<a class="code" href="classSubSystem.htm">SubSystem</a> *ss);
<a name="l00197"></a>00197     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classOctor.htm#0ddbc9a99ea4c2ec9a60fccb854d9349">shutdown</a>();
<a name="l00202"></a>00202     <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classOctor.htm#c4c8285354930bc9c3178e8d3f76462a">isInitialized</a>();
<a name="l00206"></a>00206     <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classOctor.htm#7ad25fba3ef8d820e03796ef34119669">isShutdown</a>();
<a name="l00210"></a>00210     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classOctor.htm#8c6c5cd165175cbe30b7b6e096f71670">exit</a>();
<a name="l00214"></a>00214 };
<a name="l00215"></a>00215 <span class="preprocessor">#endif // ifndef INCLUDED_Octor_hpp</span>
</pre></div><hr>
Created for project <code><font color="red"><b>Octarm VI On-board Control System</b></font></code> on Fri Apr 14 21:18:14 EDT 2006
<br>
 for Vilas Kumar Chitrakaran (cvilas(@)ces.clemson.edu). 
<br>
Documentation generated using <a href=http://www.doxygen.org>Doxygen</a>
.
</body>
</html>
