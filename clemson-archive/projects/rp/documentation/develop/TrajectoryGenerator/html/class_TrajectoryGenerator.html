<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>TrajectoryGenerator Class Reference</title>
<link href="stylesheet.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.3 on Thu Aug 16 22:00:28 2001 -->
<h1>TrajectoryGenerator  Class Reference</h1>Base class for trajectory generator classes. 
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="TrajectoryGenerator_hpp-source.html">TrajectoryGenerator.hpp</a>&gt;</code>
<p>
<p>Inheritance diagram for TrajectoryGenerator:
<p><center><img src="class_TrajectoryGenerator.gif" usemap="#TrajectoryGenerator_map" border="0"></center>
<map name="TrajectoryGenerator_map">
<area href="class_QueueTrajectoryGenerator.html" alt="QueueTrajectoryGenerator" shape="rect" coords="0,56,167,80">
<area href="class_SliderTrajectoryGenerator.html" alt="SliderTrajectoryGenerator" shape="rect" coords="177,56,344,80">
<area href="class_DefaultTrajectoryGenerator.html" alt="DefaultTrajectoryGenerator" shape="rect" coords="0,112,167,136">
</map>
<a href="class_TrajectoryGenerator-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>virtual&nbsp;</td><td valign=bottom><a class="el" href="class_TrajectoryGenerator.html#a0">~TrajectoryGenerator</a> ()</td></tr>
<tr><td nowrap align=right valign=top>virtual const TypeInfo*&nbsp;</td><td valign=bottom><a class="el" href="class_TrajectoryGenerator.html#a1">getTypeInfo</a> () const</td></tr>
<tr><td nowrap align=right valign=top>virtual bool&nbsp;</td><td valign=bottom><a class="el" href="class_TrajectoryGenerator.html#a2">getCurrentSetpoint</a> (VectorBase&lt;&gt; &amp;setpointJoint, Transform &amp;setpointCartesian, int &amp;configuration) = 0</td></tr>
<tr><td nowrap align=right valign=top>virtual void&nbsp;</td><td valign=bottom><a class="el" href="class_TrajectoryGenerator.html#a3">reset</a> (Manipulator *manipulator = 0) = 0</td></tr>
<tr><td nowrap align=right valign=top>virtual double&nbsp;</td><td valign=bottom><a class="el" href="class_TrajectoryGenerator.html#a4">getCurrentSetpointSamplePeriod</a> () = 0</td></tr>
<tr><td nowrap align=right valign=top>virtual VectorBase*&nbsp;</td><td valign=bottom><a class="el" href="class_TrajectoryGenerator.html#a5">createJointVector</a> () = 0</td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="class_TrajectoryGenerator.html#a6">getNumJoints</a> () = 0</td></tr>
<tr><td colspan=2><br><h2>Static Public Attributes</h2></td></tr>
<tr><td nowrap align=right valign=top>TypeInfoAbstractT&lt;TrajectoryGenerator&gt;&nbsp;</td><td valign=bottom><a class="el" href="class_TrajectoryGenerator.html#p0">s_typeInfo</a></td></tr>
<tr><td colspan=2><br><h2>Protected Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="class_TrajectoryGenerator.html#b0">TrajectoryGenerator</a> (const TypeInfo *parent)</td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Base class for trajectory generator classes.
<p>
The class TrajectoryGenerator is the abstract base class that defines a common interface and common properties of a trajectory generator. That is, a trajectory generator generates a stream of setpoints (e.g., joint position setpoints). Note that this is only an interface definition, the actual implementation of the trajectory generator happens in one of the derived classes (e.g., the class <a class="el" href="class_DefaultTrajectoryGenerator.html">DefaultTrajectoryGenerator</a>).
<p>
A trajectory generator does not send the setpoints to any  component of the Robotic Platform. Instead, the data transfer of setpoints is initiated by a "client" of the trajectory generator: Clients like the position control get setpoints when they need a new setpoint.
<p>
A trajectory generator can create setpoints in either  the joint space or the Cartesian space. The client of the trajectory generator must convert the setpoint into a different coordinate system using the manipulator's kinematics if necessary.
<p>
<b>Example Program:</b>
<p>
<div class="fragment"><pre><font class="comment">//======================================================================== </font>
<font class="comment">// Project: Robotic Platform</font>
<font class="comment">// ---------------------------------------------------------------------- </font>
<font class="comment">// Package: TrajectoryGenerator</font>
<font class="comment">// Authors: Markus Loffler</font>
<font class="comment">// Start Date: Mon Dec 04 14:56:40 utc 2000</font>
<font class="comment">// ----------------------------------------------------------------------  </font>
<font class="comment">// File: TrajectoryGenerator.t.cpp</font>
<font class="comment">// Example program for the class TrajectoryGenerator.</font>
<font class="comment">//========================================================================  </font>
 

<font class="comment">// ----- Standard Libaries -----</font>
<font class="preprocessor">#include &lt;iostream.h&gt;</font>

<font class="comment">// ----- QRTS Libraries -----</font>

<font class="comment">// ----- Project Includes -----</font>
<font class="preprocessor">#include "RoboticPlatform.hpp"</font>
<font class="preprocessor">#include "Vector.hpp"</font>
<font class="preprocessor">#include "Transform.hpp"</font>
<font class="preprocessor">#include "TrajectoryGenerator.hpp"</font>
<font class="preprocessor">#include "ObjectManager.hpp"</font>
<font class="preprocessor">#include "Puma560.hpp"</font>

 
 
<font class="comment">//======================================================================== </font>
<font class="comment">// main</font>
<font class="comment">//========================================================================  </font>
 
<font class="keywordtype">int</font> main(<font class="keywordtype">int</font> argc, <font class="keywordtype">char</font> *argv[])<font class="keyword"></font>
<font class="keyword"></font>{
  RoboticPlatform::init(argc, argv);
  
  <font class="comment">// Use the first trajectory generator specified</font>
  <font class="comment">// in the global configuration file.</font>
  ObjectManager om;
  <a class="code" href="class_TrajectoryGenerator.html">TrajectoryGenerator</a> *tragen
    = om.createDerivedObject&lt;<a class="code" href="class_TrajectoryGenerator.html">TrajectoryGenerator</a>&gt;();
  <font class="keywordflow">if</font> (om.d_status.isStatusError())
  {
    cout &lt;&lt; om.d_status.getMessageText() &lt;&lt; endl;
    <font class="keywordflow">return</font> -1;
  }
  
  Puma560 puma;
  puma.setTrajectoryGenerator(*tragen);
  
  <font class="keywordflow">while</font> (1)
  {
    Vector&lt;6&gt; setpointJoint;   <font class="comment">// Assuming we use a Puma</font>
    Transform setpointCartesian;
    <font class="keywordtype">int</font> configuration;
  
    <font class="keywordtype">bool</font> cartesianSetpoint
      = tragen-&gt;<a class="code" href="class_TrajectoryGenerator.html#a2">getCurrentSetpoint</a>(setpointJoint, setpointCartesian,
                                   configuration);
  
    <font class="keywordflow">if</font> (cartesianSetpoint)
    {
      cout &lt;&lt; <font class="stringliteral">"Cartesian Setpoint: "</font> &lt;&lt; setpointCartesian &lt;&lt; endl;
      cout &lt;&lt; <font class="stringliteral">"(Configuration: "</font> &lt;&lt; configuration &lt;&lt; <font class="stringliteral">")"</font> &lt;&lt; endl;
    }
    <font class="keywordflow">else</font>
      cout &lt;&lt; <font class="stringliteral">"Joint Setpoint: "</font> &lt;&lt; transpose(setpointJoint) &lt;&lt; endl;
  }
         
  <font class="keywordflow">return</font> 0;
}

</div></pre> 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a name="b0" doxytag="TrajectoryGenerator::TrajectoryGenerator"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
TrajectoryGenerator (
          </b></td>
          <td valign="bottom"><b>
const TypeInfo * <em>parent</em>&nbsp;)<code> [protected]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The constructor performs no action. Note that this constructor is protected, i.e., it is only called from the constructor of a derived class.     </td>
  </tr>
</table>
<a name="a0" doxytag="TrajectoryGenerator::~TrajectoryGenerator"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
~TrajectoryGenerator (
          </b></td>
          <td valign="bottom"><b>
)<code> [virtual]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The destructor cleans up.     </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a name="a1" doxytag="TrajectoryGenerator::getTypeInfo"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
const TypeInfo * getTypeInfo (
          </b></td>
          <td valign="bottom"><b>
) const<code> [virtual]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the type info of the class. <dl compact><dt>
<b>See also: </b><dd>
 RoboticObject::getTypeInfo() </dl>
<p>
Reimplemented in <a class="el" href="class_DefaultTrajectoryGenerator.html#a29">DefaultTrajectoryGenerator</a>, <a class="el" href="class_QueueTrajectoryGenerator.html#a21">QueueTrajectoryGenerator</a>, and <a class="el" href="class_SliderTrajectoryGenerator.html#a3">SliderTrajectoryGenerator</a>.    </td>
  </tr>
</table>
<a name="a2" doxytag="TrajectoryGenerator::getCurrentSetpoint"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
bool getCurrentSetpoint (
          </b></td>
          <td valign="bottom"><b>
VectorBase&lt;&gt;&amp; <em>setpointJoint</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
Transform &amp; <em>setpointCartesian</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
int &amp; <em>configuration</em>&nbsp;)<code> [pure virtual]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the current setpoint in either joint coordinates or Cartesian coordinates. The return value specifies in which coordinate system the setpoint is. Note: for generic programming, <a class="el" href="class_TrajectoryGenerator.html#a5">createJointVector</a>() can be used to create a vector that is big enough to fit the setpoint in joint coordinates. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>setpointJoint</em>
&nbsp;</td><td>
 The current setpoint in joint coordinates. </td></tr>
<tr><td valign=top><em>setpointCartesian</em>
&nbsp;</td><td>
 The current setpoint in Cartesian coordinates. </td></tr>
<tr><td valign=top><em>configuration</em>
&nbsp;</td><td>
 The configuration of the robot (only  provided with Cartesian setpoint). </td></tr>
</table>
</dl><dl compact><dt>
<b>Returns: </b><dd>
 true: The current setpoint is in Cartesian coordinates, <em>setpointCartesian</em> is valid, false: The current setpoint is in joint coordinates, <em>setpointJoint</em> is valid.
<p>
</dl><b>Example:</b>
<p>
<div class="fragment"><pre>     <a class="code" href="class_TrajectoryGenerator.html">TrajectoryGenerator</a> *tragen = <font class="keyword">new</font> DefaultTrajectoryGenerator();
    
     Vector&lt;6&gt; setpointJoint;   <font class="comment">// Asuming we use a Puma</font>
     Transform setpointCartesian;
     <font class="keywordtype">int</font> configuration;
    
     <font class="keywordtype">bool</font> cartesianSetpoint
       = tragen-&gt;<a class="code" href="class_TrajectoryGenerator.html#a2">getCurrentSetpoint</a>(setpointJoint, setpointCartesian,
                                    configuration);
    
     <font class="keywordflow">if</font> (cartesianSetpoint)
       cout &lt;&lt; <font class="stringliteral">"Cartesian Setpoint: "</font> &lt;&lt; setpointCartesian &lt;&lt; endl;
       cout &lt;&lt; <font class="stringliteral">"(Configuration "</font> &lt;&lt; configuration &lt;&lt; <font class="stringliteral">")"</font> &lt;&lt; endl;
     <font class="keywordflow">else</font>
       cout &lt;&lt; <font class="stringliteral">"Joint Setpoint: "</font> &lt;&lt; setpointJoint &lt;&lt; endl;</div></pre> 
<p>
Reimplemented in <a class="el" href="class_DefaultTrajectoryGenerator.html#a23">DefaultTrajectoryGenerator</a>, and <a class="el" href="class_SliderTrajectoryGenerator.html#a5">SliderTrajectoryGenerator</a>.    </td>
  </tr>
</table>
<a name="a3" doxytag="TrajectoryGenerator::reset"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void reset (
          </b></td>
          <td valign="bottom"><b>
Manipulator * <em>manipulator</em> = 0&nbsp;)<code> [pure virtual]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is called in either of the following cases: <ul>
 <li> The trajectory generator is constructed. In this case, <em>manipulator</em> is zero. <li> A new manipulator starts using the trajectory generator. In this case <em>manipulator</em> points to the manipulator. <li> To inform the trajectory generator that the manipulator position has changed abruptly. This can be the case because the manipulator was calibrated to a new  position, or this servo control had been disabled for a while and the manipulator was moved during this time (e.g., when using zero gravity teaching). In this case <em>manipulator</em> also points to the manipulator. </ul>

<p>
This function must initialize the trajectory generator with the current manipulator position and do other  initalization (e.g., reinitialize the motion queue).
<p>
Note: If multiple manipulators connect to the same trajectory generator, the settings of the last manipulator that connected will be used. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>manipulator</em>
&nbsp;</td><td>
 A pointer to the associated manipulator, 0 if no manipulator is associated. </td></tr>
</table>
</dl>
<p>
Reimplemented in <a class="el" href="class_DefaultTrajectoryGenerator.html#a24">DefaultTrajectoryGenerator</a>, and <a class="el" href="class_SliderTrajectoryGenerator.html#a6">SliderTrajectoryGenerator</a>.    </td>
  </tr>
</table>
<a name="a4" doxytag="TrajectoryGenerator::getCurrentSetpointSamplePeriod"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
double getCurrentSetpointSamplePeriod (
          </b></td>
          <td valign="bottom"><b>
)<code> [pure virtual]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function returns the expected sample period with which the trajectory generator provides the setpoints. A trajectory generator can provide setpoints at a lower rate than for example the servo control, or even unsynchronuous. The value returned by this function allows the client that uses the setpoints (e.g., the servo control)  to apply a low-pass filter that smoothes the incoming trajectory. <dl compact><dt>
<b>Returns: </b><dd>
 The maximum expected setpoint sample period. </dl>
<p>
Reimplemented in <a class="el" href="class_DefaultTrajectoryGenerator.html#a25">DefaultTrajectoryGenerator</a>, and <a class="el" href="class_SliderTrajectoryGenerator.html#a7">SliderTrajectoryGenerator</a>.    </td>
  </tr>
</table>
<a name="a5" doxytag="TrajectoryGenerator::createJointVector"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
VectorBase * createJointVector (
          </b></td>
          <td valign="bottom"><b>
)<code> [pure virtual]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Creates a vector that has the correct size to fit all joint coordinates in it. The vector is dynamically  allocated and needs to be freed with "delete". <dl compact><dt>
<b>Returns: </b><dd>
 A pointer to the new vector. </dl>
<p>
Reimplemented in <a class="el" href="class_DefaultTrajectoryGenerator.html#a26">DefaultTrajectoryGenerator</a>, and <a class="el" href="class_SliderTrajectoryGenerator.html#a8">SliderTrajectoryGenerator</a>.    </td>
  </tr>
</table>
<a name="a6" doxytag="TrajectoryGenerator::getNumJoints"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int getNumJoints (
          </b></td>
          <td valign="bottom"><b>
)<code> [pure virtual]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Determines the number of joints that the trajectory generator uses. <dl compact><dt>
<b>Returns: </b><dd>
 The number of joints. </dl>
<p>
Reimplemented in <a class="el" href="class_DefaultTrajectoryGenerator.html#a27">DefaultTrajectoryGenerator</a>, and <a class="el" href="class_SliderTrajectoryGenerator.html#a9">SliderTrajectoryGenerator</a>.    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a name="p0" doxytag="TrajectoryGenerator::s_typeInfo"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
TypeInfoAbstractT&lt; TrajectoryGenerator &gt; s_typeInfo<code> [static]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The static type info object of the class. Every class derived from RoboticObject must have this static data member and initialize it correctly. 
<p>
Reimplemented in <a class="el" href="class_DefaultTrajectoryGenerator.html#p0">DefaultTrajectoryGenerator</a>, <a class="el" href="class_QueueTrajectoryGenerator.html#p0">QueueTrajectoryGenerator</a>, and <a class="el" href="class_SliderTrajectoryGenerator.html#p0">SliderTrajectoryGenerator</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="TrajectoryGenerator_hpp-source.html">TrajectoryGenerator.hpp</a></ul>
</body>
</html>
