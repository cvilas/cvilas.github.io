<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Differentiator Template Class Reference</title>
<link href="stylesheet.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.3 on Thu Jul 19 13:03:30 2001 -->
<h1>Differentiator  Class Template Reference</h1>The class <code>Differentiator</code> provides numerical method for differentation. 
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="Differentiator_hpp-source.html">Differentiator.hpp</a>&gt;</code>
<p>
<a href="class_Differentiator-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="class_Differentiator.html#a0">Differentiator</a> ()</td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="class_Differentiator.html#a1">Differentiator</a> (double samplingPeriod)</td></tr>
<tr><td nowrap align=right valign=top>virtual&nbsp;</td><td valign=bottom><a class="el" href="class_Differentiator.html#a2">~Differentiator</a> ()</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_Differentiator.html#a3">setSamplingPeriod</a> (double samplingPeriod)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_Differentiator.html#a4">setCutOffFrequencyHz</a> (double cutOffFrequencyHz)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_Differentiator.html#a5">setCutOffFrequencyRad</a> (double cutOffFrequencyRad)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_Differentiator.html#a6">setDampingRatio</a> (double dampingRatio)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_Differentiator.html#a7">reset</a> ()</td></tr>
<tr><td nowrap align=right valign=top>virtual T&nbsp;</td><td valign=bottom><a class="el" href="class_Differentiator.html#a8">differentiate</a> (T &amp;currentInput)</td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;class T = double&gt;  template class Differentiator</h3>

The class <code>Differentiator</code> provides numerical method for differentation.
<p>
The Differentiator computes differentiation of the signal using backward difference followed by smoothening of the differentiated signal by a low pass filter. A derived class from Differentiator can override the differenting algorithm provided.
<p>
The class <code>Differentiator</code> can be used with any data type (double, int, <a class="el" href="class_RowVector.html">RowVector</a>, <a class="el" href="class_ColumnVector.html">ColumnVector</a>, <a class="el" href="class_Matrix.html">Matrix</a>, etc).
<p>
<b>Example Program:</b>
<p>
<div class="fragment"><pre><font class="comment">//========================================================================</font>
<font class="comment">// Project: Robotic Platform</font>
<font class="comment">// ----------------------------------------------------------------------</font>
<font class="comment">// Package      : The Math Library</font>
<font class="comment">// Authors      : Vilas Kumar Chitrakaran</font>
<font class="comment">// Start Date   : Wed Dec 20 11:08:28 GMT 2000</font>
<font class="comment">// Compiler     : GNU c++</font>
<font class="comment">// Operating System : QNX RTP</font>
<font class="comment">// ----------------------------------------------------------------------</font>
<font class="comment">// File: Differentiator.t.cpp</font>
<font class="comment">// Example program for the Differentiator.</font>
<font class="comment">//========================================================================</font>

<font class="comment">//========================================================================</font>
<font class="comment">//Differentiator.t.cpp</font>
<font class="comment">//------------------------------------------------------------------------</font>
<font class="comment">// \brief</font>
<font class="comment">// The file Differentiator.t.cpp is an example program that tests the </font>
<font class="comment">// Differentiator related functions provided in the Math Library for </font>
<font class="comment">// the Robotic Platform.</font>
<font class="comment">//</font>
<font class="comment">// This program demostrates the use of Differentiator on the data type</font>
<font class="comment">// ColumnVector. </font>
<font class="comment">//========================================================================</font>

<font class="preprocessor">#include "Differentiator.hpp"</font>
<font class="preprocessor">#include "ColumnVector.hpp"</font>

<font class="preprocessor">#include &lt;iostream.h&gt;</font>
<font class="preprocessor">#include &lt;stdio.h&gt;</font>
<font class="preprocessor">#include &lt;math.h&gt;</font>
<font class="preprocessor">#include &lt;stdlib.h&gt;</font>

<font class="preprocessor">#define PI 3.141592654</font>
<font class="preprocessor"></font>

<font class="keywordtype">int</font> main()<font class="keyword"></font>
<font class="keyword"></font>{
  FILE *infile, *outfile;
  <font class="comment">// These files hold the input and output waveforms.</font>
  infile = fopen(<font class="stringliteral">"position.dat"</font>, <font class="stringliteral">"w+"</font>);
    outfile = fopen(<font class="stringliteral">"velocity.dat"</font>, <font class="stringliteral">"w+"</font>);
  
  <a class="code" href="class_ColumnVector.html">ColumnVector&lt;3&gt;</a> positionSensor;
  <font class="comment">// Lets assume this vector holds all the position data from position sensors.</font>
  
  <a class="code" href="class_ColumnVector.html">ColumnVector&lt;3&gt;</a> velocity;
  <font class="comment">// Lets assume this vector holds all the velocity information, from time derivative of position signals.</font>
  
  
  <font class="comment">// Define a differentiator with a sampling period of 1 milli-second.</font>
  <a class="code" href="class_Differentiator.html">Differentiator&lt; ColumnVector&lt;3&gt;</a> &gt; myDifferentiator(0.001);

  <font class="comment">// Set cut-off frequency for the filter in the</font>
  <font class="comment">// differentiator. This usually will need hit-and-trial.</font>
  myDifferentiator.<a class="code" href="class_Differentiator.html#a4">setCutOffFrequencyHz</a>(30);
  
  <font class="comment">// Set damping for the filter in the</font>
  <font class="comment">// differentiator.</font>
  myDifferentiator.<a class="code" href="class_Differentiator.html#a6">setDampingRatio</a>(1);

  <font class="comment">// Position signals are defined as shown below.</font>
  <font class="comment">// Practically these will be obtained realtime from sensors.</font>
  <font class="comment">// They are differentiated and both the input and output</font>
  <font class="comment">// waveforms are written to a file.</font>
  <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i=0; i&lt;1000; i++)
  { 
    positionSensor(1) = cos(2*PI*i/1000.0);
    positionSensor(2) = tanh(2*PI*i/1000.0);
    positionSensor(3) = 2*i/1000.0;
  
  
    velocity = myDifferentiator.<a class="code" href="class_Differentiator.html#a8">differentiate</a>(positionSensor);
    <font class="comment">// Differentiate position to get velocity.</font>
  
    <font class="comment">// simply write the outputs to a file and check it using matlab... </font>
    <font class="comment">// Note that each file holds elements of the columnVector sequentially for a </font>
    <font class="comment">// particular time..ie..[element1 element2 element3 element1...] and so on.</font>
    fprintf(infile, <font class="stringliteral">"%f \n"</font>, positionSensor(1));
    fprintf(infile, <font class="stringliteral">"%f \n"</font>, positionSensor(2));
    fprintf(infile, <font class="stringliteral">"%f \n"</font>, positionSensor(3));

    fprintf(outfile, <font class="stringliteral">"%f \n"</font>, velocity(1));
    fprintf(outfile, <font class="stringliteral">"%f \n"</font>, velocity(2));
    fprintf(outfile, <font class="stringliteral">"%f \n"</font>, velocity(3));
  }
  fclose(infile);
  fclose(outfile);


  <font class="keywordflow">return</font>(0);
}


</div></pre> 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a name="a0" doxytag="Differentiator::Differentiator"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
Differentiator (
          </b></td>
          <td valign="bottom"><b>
)<code> [inline]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Default constructor for differentiator. Sampling period set to default of 0.001 seconds. The cut-off frequency is set to half the sampling frequency and damping ratio of the low-pass filter in the differentiator is set to 1.     </td>
  </tr>
</table>
<a name="a1" doxytag="Differentiator::Differentiator"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
Differentiator (
          </b></td>
          <td valign="bottom"><b>
double <em>samplingPeriod</em>&nbsp;)<code> [inline]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The Constructor that initializes the sampling period. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>samplingPeriod</em>
&nbsp;</td><td>
 The sampling period of the  differentiator in seconds. </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a2" doxytag="Differentiator::~Differentiator"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
~Differentiator (
          </b></td>
          <td valign="bottom"><b>
)<code> [inline, virtual]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The default destructor.     </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a name="a3" doxytag="Differentiator::setSamplingPeriod"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void setSamplingPeriod (
          </b></td>
          <td valign="bottom"><b>
double <em>samplingPeriod</em>&nbsp;)<code> [inline]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the sampling period of the differentiator  <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>samplingPeriod</em>
&nbsp;</td><td>
 The sampling period of the  differentiator in seconds. By default the sampling period  is set to 0.001 seconds. </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a4" doxytag="Differentiator::setCutOffFrequencyHz"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void setCutOffFrequencyHz (
          </b></td>
          <td valign="bottom"><b>
double <em>cutOffFrequencyHz</em>&nbsp;)<code> [inline]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Differentiation is followed by a low pass filtering process. This function sets the cut-off frequency of the filter in hertz.  <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>cutOffFrequencyHz</em>
&nbsp;</td><td>
 The cut-off frequency of the  low pass butterworth filter in hertz. By default the cut-off frequency  is set to half the sampling frequency of the differentiator. </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a5" doxytag="Differentiator::setCutOffFrequencyRad"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void setCutOffFrequencyRad (
          </b></td>
          <td valign="bottom"><b>
double <em>cutOffFrequencyRad</em>&nbsp;)<code> [inline]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Differentiation is followed by a low pass filtering process. This function sets the cut-off frequency of the filter in Rad/sec.  <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>cutOffFrequencyRad</em>
&nbsp;</td><td>
 The cut-off frequency of the  low pass butterworth filter in Rad/sec. By default the cut-off frequency  is set to half the sampling frequency of the differentiator. </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a6" doxytag="Differentiator::setDampingRatio"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void setDampingRatio (
          </b></td>
          <td valign="bottom"><b>
double <em>dampingRatio</em>&nbsp;)<code> [inline]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the damping factor of the butterworth filter. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>dampingRatio</em>
&nbsp;</td><td>
 Desired damping ratio. The default value is 1. </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a7" doxytag="Differentiator::reset"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void reset (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Resets the differentiator output to zero. This is a useful function that can be used to  avoid generation of peaks when the variable being  differentiated changes value offline.     </td>
  </tr>
</table>
<a name="a8" doxytag="Differentiator::differentiate"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
T differentiate (
          </b></td>
          <td valign="bottom"><b>
T &amp; <em>currentInput</em>&nbsp;)<code> [inline, virtual]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function implements the numerical  method for differentiation. Being a virtual method, the user can derive a method of differentiation that suits the desired needs. i.e..override Differentiator&lt;-My Differentiator ( with a different <em>Differentiate()</em> method).  The default method also calls a low-pass Butterworth filter to smoothen out the differentiator output. The differentiator output in the first cycle is smoothened to zero. The cut-off frequency of the filter is set by the method <code>setCutOffFrequency</code>. By default the cut-off frequency is half the sampling frequency of the Differentiator. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>currentInput</em>
&nbsp;</td><td>
 The present value of the  variable being differentiated. </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="Differentiator_hpp-source.html">Differentiator.hpp</a></ul>
</body>
</html>
