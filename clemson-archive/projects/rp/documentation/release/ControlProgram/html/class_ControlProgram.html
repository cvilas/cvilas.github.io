<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ControlProgram Class Reference</title>
<link href="stylesheet.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.3 on Mon Jul 26 14:36:17 2004 -->
<h1>ControlProgram  Class Reference</h1>The <code>ControlProgram</code> class library is the base class for all QMotor control programs. 
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="ControlProgram_hpp-source.html">ControlProgram.hpp</a>&gt;</code>
<p>
<a href="class_ControlProgram-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a0">ControlProgram</a> (int argc = 0, char *argv[] = 0, const char *timerServerName = "qrts/ts0", int priority = 27)</td></tr>
<tr><td nowrap align=right valign=top>virtual&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a1">~ControlProgram</a> ()</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a2">setCommandLineArguments</a> (int argc, char *argv[])</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a3">run</a> ()</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a4">mainLoop</a> ()</td></tr>
<tr><td nowrap align=right valign=top>pthread_t&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a5">runInThread</a> ()</td></tr>
<tr><td nowrap align=right valign=top>pthread_t&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a6">runInThreadBlocking</a> ()</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a7">waitForStart</a> ()</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a8">stopControlLoopInThread</a> ()</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a9">isControlProgramRunningInThread</a> ()</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a10">setMasterMode</a> ()</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a11">isMasterMode</a> ()</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a12">setAutorunGUIOn</a> ()</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a13">setAutorunGUIOff</a> ()</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a14">isAutorunGUIOn</a> ()</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a15">enableSupervisorMode</a> ()</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a16">disableSupervisorMode</a> ()</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a17">isSupervisorModeEnabled</a> ()</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a18">enableSignalHandling</a> ()</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a19">disableSignalHandling</a> ()</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a20">isSignalHandlingEnabled</a> ()</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a21">registerLogVariable</a> (double *address, const char *name, const char *description = "", int numRows = 1, int numColums = 1)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a22">registerLogVariable</a> (int *address, const char *name, const char *description = "", int numRows = 1, int numColums = 1)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a23">registerLogVariable</a> (MatrixBase&lt;double&gt; &amp;matrix, const char *name, const char *description = "")</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a24">registerLogVariable</a> (MatrixBase&lt;int&gt; &amp;matrix, const char *name, const char *description = "")</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a25">registerControlParameter</a> (double *address, const char *name, const char *description = "", int numRows = 1, int numColums = 1)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a26">registerControlParameter</a> (int *address, const char *name, const char *description = "", int numRows = 1, int numColums = 1)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a27">registerControlParameter</a> (MatrixBase&lt;double&gt; &amp;matrix, const char *name, const char *description = "")</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a28">registerControlParameter</a> (MatrixBase&lt;int&gt; &amp;matrix, const char *name, const char *description = "")</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a29">clearAllLogVariables</a> ()</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a30">clearAllControlParameters</a> ()</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a31">setNoLogMode</a> (const char *variableName)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a32">setContinuousLogMode</a> (const char *variableName)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a33">setTimedLogMode</a> (const char *variableName)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a34">setEventTriggeredLogMode</a> (const char *variableName)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a35">getLogVariableHandle</a> (const char *variableName)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a36">startLogging</a> (int logVariableHandle)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a37">stopLogging</a> (int logVariableHandle)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a38">setLogDuration</a> (const char *variableName, double logDuration)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a39">setLogFrequency</a> (const char *variableName, double logFrequency)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a40">setLogStartTime</a> (const char *variableName, double logStartTime)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a41">setConfigurationFileName</a> (const char *configurationFileName)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a42">isControlRunning</a> () const</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a43">isControlShuttingDown</a> () const</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a44">wasShutdownAborted</a> () const</td></tr>
<tr><td nowrap align=right valign=top>double&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#a45">getControlCycleCPUTime</a> ()</td></tr>
<tr><td colspan=2><br><h2>Public Attributes</h2></td></tr>
<tr><td nowrap align=right valign=top>double&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#m0">d_controlFrequency</a></td></tr>
<tr><td nowrap align=right valign=top>double&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#m1">d_controlPeriod</a></td></tr>
<tr><td nowrap align=right valign=top>double&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#m2">d_controlDuration</a></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#m3">d_runForever</a></td></tr>
<tr><td nowrap align=right valign=top>double&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#m4">d_elapsedTime</a></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#m5">d_elapsedTicks</a></td></tr>
<tr><td nowrap align=right valign=top>Config&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#m6">d_config</a></td></tr>
<tr><td nowrap align=right valign=top>CmdLineArgs&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#m7">d_cmdLine</a></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#m8">d_standAloneMode</a></td></tr>
<tr><td nowrap align=right valign=top>ostream&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#m9">d_messageStream</a></td></tr>
<tr><td nowrap align=right valign=top>ostream&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#m10">d_debugStream</a></td></tr>
<tr><td nowrap align=right valign=top>char*&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#m11">d_applicationName</a></td></tr>
<tr><td colspan=2><br><h2>Protected Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#b0">enterControl</a> ()</td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#b1">readConfiguration</a> ()</td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#b2">startControl</a> ()</td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#b3">control</a> ()</td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#b4">startControlProgramShutdown</a> ()</td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#b5">stopControl</a> ()</td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#b6">exitControl</a> ()</td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#b7">handleMessage</a> (pid_t pid, char *message)</td></tr>
<tr><td nowrap align=right valign=top>virtual void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#b8">onControlProgramError</a> (int errorCode)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_ControlProgram.html#b9">shutdownComplete</a> ()</td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
The <code>ControlProgram</code> class library is the base class for all QMotor control programs.
<p>
To implement a specific control application, the user derives a class ( e.g., "MyControlProgram", "MotorPIDControl", etc.) from the  ControlProgram class. In the derived class, the user needs to implement  functionality specific to the control application (listed below as  "virtual functions").
<p>
The user can utilize functions from the ControlProgram base class to  manipulate execution of the control algorithm, set data logging options,  and specify control parameters. To create an executable control program,  the user must instantiate an object of the class that is derived from  ControlProgram in main() and call the method <a class="el" href="class_ControlProgram.html#a3">run</a>(). Note: The createqcp utility can be used to automatically create a  skeleton control program.
<p>
<b>Timing</b>
<p>
The ControlProgram class will try to connect to a timer server every  time the control is started. The timer server name (i.e., the name the  timer server is registered under in the QNX namespace, not the name of  the executable file) can be specified in the configuration file. The  timer server has to be started prior to start of the control. The timer  server is started at a fixed frequency. The frequency of the control  program must be an integer divisor of the frequency of the timer server.
<p>
<b>Signal</b> <b>Handling</b>
<p>
If the CTRL-C signal is sent while the control program is executing, the  signal handler will set a flag which will abort the control at the next  control cycle rather than immediately aborting the control (i.e., the  control won't be aborted in the middle of the cycle). Once CTRL-C is  pressed, the signal handler is de-installed which restores CTRL-C's  original function. Hence, the next time CTRL-C is pressed (in case  the control progran still hangs), the program is terminated unconditionally.
<p>
<b>Math</b> <b>Errors</b>
<p>
QNX 4: If a math error occurs, control execution terminates immediately. <br>
 QNX 6/RTP: Math errors do not result in a control loop termination. at the end of the control cycle.
<p>
<b>Example Program:</b>
<p>
<div class="fragment"><pre><font class="comment">// ========================================================================</font>
<font class="comment">//  QMotor - A PC Based Real-Time Graphical Control Environment</font>
<font class="comment">//  (c) 2000 QRTS</font>
<font class="comment">//  ---------------------------------------------------------------</font>
<font class="comment">//  Control Program : PDControl.cpp</font>
<font class="comment">//  Description     : A simple PD control example</font>
<font class="comment">//  Author          : Markus Loffler</font>
<font class="comment">//  Start Date      : Tue Feb 22 10:30:57 est 2000</font>
<font class="comment">// ========================================================================</font>

<font class="comment">// ----- QRTS libraries -----</font>
<font class="preprocessor">#include "ControlProgram.hpp"</font>
<font class="preprocessor">#include "IOBoardClient.hpp"</font>
<font class="preprocessor">#include "ButterworthFilter.hpp"</font>

<font class="comment">// ----- C standard libraries -----</font>
<font class="preprocessor">#include &lt;math.h&gt;</font>


<font class="comment">//============================================================================</font>
<font class="comment">// Class definition of the PDControl class</font>
<font class="comment">//============================================================================</font>

<font class="keyword">class </font>PDControl : <font class="keyword">public</font> <a class="code" href="class_ControlProgram.html">ControlProgram</a>
{
  <font class="keyword">protected</font>:

    <font class="comment">// ----- Log Variables -----</font>
    <font class="keywordtype">double</font> q;         <font class="comment">// Current Position</font>
    <font class="keywordtype">double</font> qd;        <font class="comment">// Desired Position</font>
    <font class="keywordtype">double</font> error;     <font class="comment">// Current Position Error</font>
    <font class="keywordtype">double</font> errorDot;  <font class="comment">// Derivative of Current Position Error</font>
    <font class="keywordtype">double</font> torque;    <font class="comment">// Output Torque</font>
    
    <font class="comment">// ----- Control Parameters -----</font>
    <font class="keywordtype">double</font> kp;        <font class="comment">// Proportional Control Gain</font>
    <font class="keywordtype">double</font> kd;        <font class="comment">// Derivative Control Gain</font>
    <font class="keywordtype">double</font> amplitude; <font class="comment">// Amplitude of Desired Sine Trajectory</font>
    <font class="keywordtype">double</font> frequency; <font class="comment">// Frequency of Desired Sine Trajectory</font>
           
    <font class="comment">// ----- Other Variables -----</font>
    <font class="keywordtype">double</font> errorPrevious; <font class="comment">// Error of last control cycle</font>
    ButterworthFilter&lt;double&gt; filter;  <font class="comment">// Filter for backwards difference</font>
    
           
    <font class="comment">// ----- Clients -----</font>
    IOBoardClient *iobc;
      <font class="comment">// I/O board client, used to access the I/O board through the server,</font>
      <font class="comment">// e.g. read A/D channels, read encoders, write D/A channels, etc.</font>

  <font class="keyword">public</font>:

    PDControl(<font class="keywordtype">int</font> argc, <font class="keywordtype">char</font> *argv[]) : <a class="code" href="class_ControlProgram.html">ControlProgram</a> (argc, argv){};
      <font class="comment">// Constructor. Usually no need to make changes here</font>

    ~PDControl ()<font class="keyword"> </font>{};
      <font class="comment">// Destructor. Usually no need to make changes here</font>
      
      
    <font class="comment">// ----- User Functions -----</font>
    <font class="comment">// This functions need to be implemented by the user in order to implement</font>
    <font class="comment">// his control application. The user does not need to implement all of them,</font>
    <font class="comment">// but usually at least enterControl(), startControl(), control() and</font>
    <font class="comment">// exitControl() are implemented.</font>
    
    <font class="keyword">virtual</font> <font class="keywordtype">int</font> <a class="code" href="class_ControlProgram.html#b0">enterControl</a>();
    <font class="keyword">virtual</font> <font class="keywordtype">int</font> <a class="code" href="class_ControlProgram.html#b2">startControl</a>();
    <font class="keyword">virtual</font> <font class="keywordtype">int</font> <a class="code" href="class_ControlProgram.html#b3">control</a>();
    <font class="keyword">virtual</font> <font class="keywordtype">int</font> <a class="code" href="class_ControlProgram.html#b5">stopControl</a>();
    <font class="keyword">virtual</font> <font class="keywordtype">int</font> <a class="code" href="class_ControlProgram.html#b6">exitControl</a>();
};


<font class="comment">//============================================================================</font>
<font class="comment">// PDControl::enterControl</font>
<font class="comment">// --------------------------------------------------------------------------</font>
<font class="comment">// This function is called when the control program is loaded. In standalone</font>
<font class="comment">// mode, this happens immediately. When using the GUI, it happens when the</font>
<font class="comment">// user loads the control program.</font>
<font class="comment">//============================================================================</font>

<font class="keywordtype">int</font> <a class="code" href="class_ControlProgram.html#b0">PDControl::enterControl</a>()<font class="keyword"></font>
<font class="keyword"></font>{
  <a class="code" href="class_ControlProgram.html#a21">registerLogVariable</a>(&amp;q, <font class="stringliteral">"q"</font>, <font class="stringliteral">"Current Position"</font>);
  <a class="code" href="class_ControlProgram.html#a21">registerLogVariable</a>(&amp;qd, <font class="stringliteral">"qd"</font>, <font class="stringliteral">"Desired Position"</font>);
  <a class="code" href="class_ControlProgram.html#a21">registerLogVariable</a>(&amp;error, <font class="stringliteral">"error"</font>, <font class="stringliteral">"Position Error"</font>);
  <a class="code" href="class_ControlProgram.html#a21">registerLogVariable</a>(&amp;errorDot, <font class="stringliteral">"errorDot"</font>, <font class="stringliteral">"Position Error Derivative"</font>);
  <a class="code" href="class_ControlProgram.html#a21">registerLogVariable</a>(&amp;torque, <font class="stringliteral">"torque"</font>, <font class="stringliteral">"Control Torque"</font>);

  <a class="code" href="class_ControlProgram.html#a25">registerControlParameter</a>(&amp;kp, <font class="stringliteral">"kp"</font>, <font class="stringliteral">"Proportional Gain"</font>);
  <a class="code" href="class_ControlProgram.html#a25">registerControlParameter</a>(&amp;kp, <font class="stringliteral">"kd"</font>, <font class="stringliteral">"Derivative Gain"</font>);
  <a class="code" href="class_ControlProgram.html#a25">registerControlParameter</a>(&amp;amplitude, <font class="stringliteral">"amplitude"</font>,
                           <font class="stringliteral">"Amplitude of Desired Sine Trajectory"</font>);
  <a class="code" href="class_ControlProgram.html#a25">registerControlParameter</a>(&amp;frequency, <font class="stringliteral">"frequency"</font>,
                           <font class="stringliteral">"Frequency of Desired Sine Trajectory"</font>);

  <font class="comment">// Set all control parameters initially to zero</font>
  <a class="code" href="class_ControlProgram.html#a30">clearAllControlParameters</a>();
  
  <font class="comment">// Start message</font>
  d_messageStream
    &lt;&lt; endl &lt;&lt; <font class="stringliteral">"----- "</font> &lt;&lt; d_applicationName &lt;&lt; <font class="stringliteral">" -----"</font> &lt;&lt; endl
    &lt;&lt; <font class="stringliteral">"This is an example of a PD control algorithm."</font> &lt;&lt; endl &lt;&lt; endl;
  
  <font class="keywordflow">return</font> 0;
}


<font class="comment">//============================================================================</font>
<font class="comment">// PDControl::startControl</font>
<font class="comment">// --------------------------------------------------------------------------</font>
<font class="comment">// Called each time a control run is started. If running from the GUI, this</font>
<font class="comment">// will be called each time the START button is pushed. </font>
<font class="comment">//============================================================================</font>

<font class="keywordtype">int</font> <a class="code" href="class_ControlProgram.html#b2">PDControl::startControl</a>()<font class="keyword"></font>
<font class="keyword"></font>{
  <a class="code" href="class_ControlProgram.html#a29">clearAllLogVariables</a>();
  
  <font class="comment">// ----- Initialize your clients here -----</font>
  <font class="keywordtype">char</font> *ioboardServerName = <font class="stringliteral">"qrts/iobs0"</font>;
  iobc = <font class="keyword">new</font> IOBoardClient(ioboardServerName);

  <font class="keywordflow">if</font> (iobc-&gt;isStatusError())  
  {                             
    d_status.setStatusError()
      &lt;&lt; d_applicationName &lt;&lt; <font class="stringliteral">": [PDControl::startControl()] "</font>
      &lt;&lt; <font class="stringliteral">"Error connecting to IO board server "</font> &lt;&lt; ioboardServerName &lt;&lt; endl;
    <font class="keyword">delete</font> iobc;
    iobc = 0;
    <font class="keywordflow">return</font> -1;
  }

  filter.setCutOffFrequency(100);
  filter.setSamplingTime(d_controlPeriod);
  filter.setDampingRatio(1.0);
  filter.setAutoInit();
  
  <font class="keywordflow">return</font> 0;
}


<font class="comment">//============================================================================</font>
<font class="comment">// PDControl::control</font>
<font class="comment">//----------------------------------------------------------------------------</font>
<font class="comment">// Called each control cycle. Do your input, control computations, and output</font>
<font class="comment">// here. If you return 0, the control will continue to execute. If you return</font>
<font class="comment">// nonzero, the control will abort. You may want to abort if some error</font>
<font class="comment">// condition occurs (excessive velocity,  etc.)</font>
<font class="comment">//============================================================================</font>

<font class="keywordtype">int</font> <a class="code" href="class_ControlProgram.html#b3">PDControl::control</a>()<font class="keyword"></font>
<font class="keyword"></font>{
  <font class="comment">// Calculate error</font>
  qd = sin(frequency * d_elapsedTime) * amplitude;
  q = iobc-&gt;getAdcValue(0);
  error = q - qd;
  
  <font class="comment">// Calculate derivative of error (backwards difference)</font>
  errorDot =
    filter.filter((error - errorPrevious) / d_controlPeriod);
  errorPrevious = error;
  
  <font class="comment">// Calculate PD control</font>
  torque = kp * error + kd * errorDot;
  
  iobc-&gt;setDacValue(0, torque);

  <font class="keywordflow">return</font> 0;
}


<font class="comment">//============================================================================</font>
<font class="comment">// PDControl::stopControl()</font>
<font class="comment">//----------------------------------------------------------------------------</font>
<font class="comment">// Called each time a control run ends. If running from the GUI, this</font>
<font class="comment">// will be called each time the STOP button is pushed, or when a timed run</font>
<font class="comment">// ends, or when the control aborts itself.</font>
<font class="comment">//============================================================================</font>

<font class="keywordtype">int</font> <a class="code" href="class_ControlProgram.html#b5">PDControl::stopControl</a>()<font class="keyword"></font>
<font class="keyword"></font>{
  <font class="comment">// Zero out the DAC</font>
  iobc-&gt;setDacValue(0, 0);

  <font class="comment">// Disconnect from IO board server</font>
  <font class="keyword">delete</font> iobc;

  <font class="keywordflow">return</font> 0;
}


<font class="comment">//============================================================================</font>
<font class="comment">// PDControl::exitControl</font>
<font class="comment">// --------------------------------------------------------------------------</font>
<font class="comment">// This function is called when the control is unloaded. In standalone</font>
<font class="comment">// mode, this happens after one control run has completed. When using</font>
<font class="comment">// the GUI, it happens when the user loads a new control program or</font>
<font class="comment">// exits the GUI.</font>
<font class="comment">//============================================================================</font>

<font class="keywordtype">int</font> <a class="code" href="class_ControlProgram.html#b6">PDControl::exitControl</a>()<font class="keyword"></font>
<font class="keyword"></font>{
  <font class="keywordflow">return</font> 0;
}


<font class="comment">//============================================================================</font>
<font class="comment">// main()</font>
<font class="comment">//----------------------------------------------------------------------------</font>
<font class="comment">// The main function instantiates the object and goes into the mainloop</font>
<font class="comment">//============================================================================</font>

main (<font class="keywordtype">int</font> argc, <font class="keywordtype">char</font> *argv[])<font class="keyword"></font>
<font class="keyword"></font>{
  PDControl cp (argc, argv);
  cp.<a class="code" href="class_ControlProgram.html#a3">run</a>();
}

</div></pre> 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a name="a0" doxytag="ControlProgram::ControlProgram"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
ControlProgram (
          </b></td>
          <td valign="bottom"><b>
int <em>argc</em> = 0, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
char * <em>argv</em>[] = 0, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const char * <em>timerServerName</em> = "qrts/ts0", 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
int <em>priority</em> = 27&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Constructor. Initializes the class. In the constructor of the derived  class, use the same parameters and pass them to the base class  constructor.
<p>
The base class processes the following command line parameters: <ul>
 <li><code>-config &lt;filename&gt;</code>: Specify a configuration filename. Default filename is the name of the control program plus the extension ".cfg". <li><code>-savelogs</code>: If this option is specified, the data of the logged variables is saved.  to log files <li><code>-debugmessages</code>: If this switch is specified, messages sent to d_debugStream are output  to the terminal. <li><code>-supervisor</code>: Used internally by the QMotor GUI. Do not use this parameter. <li><code>-outputfd</code>: Used internally by the QMotor GUI. Do not use this parameter. </ul>
<dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>argc</em>
&nbsp;</td><td>
 Number of parameters.(See main() ). </td></tr>
<tr><td valign=top><em>argv</em>
&nbsp;</td><td>
 Array of pointers to the command line parameters (See main()). </td></tr>
<tr><td valign=top><em>timerServerName</em>
&nbsp;</td><td>
 The name of the timer server. This parameter is present for backwards compability. Rather than using it in new control programs, use the setting "timerServerName" in the configuration file. </td></tr>
<tr><td valign=top><em>priority</em>
&nbsp;</td><td>
 Priority of the control program. for backwards compability. Rather than using it in new control programs, use the setting "priority" in the configuration file. </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a1" doxytag="ControlProgram::~ControlProgram"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
~ControlProgram (
          </b></td>
          <td valign="bottom"><b>
)<code> [virtual]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Destructor. Cleans up.     </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a name="a2" doxytag="ControlProgram::setCommandLineArguments"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void setCommandLineArguments (
          </b></td>
          <td valign="bottom"><b>
int <em>argc</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
char * <em>argv</em>[]&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
If the command line arguments where not specified in the constructor, this function allows to do so after the constructor is called. This function must be called before <a class="el" href="class_ControlProgram.html#a3">run</a>() or <a class="el" href="class_ControlProgram.html#a5">runInThread</a>() is called.     </td>
  </tr>
</table>
<a name="a3" doxytag="ControlProgram::run"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void run (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
If there is no supervisor, runs the control once and then exits, otherwise waits for commands from the supervisor.     </td>
  </tr>
</table>
<a name="a4" doxytag="ControlProgram::mainLoop"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void mainLoop (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
These functions allow to run the QMotor control loop in a  separate thread. Consequently, the main thread can do stuff while the control loop is running. This functionality was mainly created for the Robotic Platform.     </td>
  </tr>
</table>
<a name="a5" doxytag="ControlProgram::runInThread"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
pthread_t runInThread (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function spawns a new thread and starts the control program in this new thread (i.e., it calls <a class="el" href="class_ControlProgram.html#a3">run</a>() in this new thread).
<p>
As opposed to <a class="el" href="class_ControlProgram.html#a6">runInThreadBlocking</a>(), this function returns immediately, and the control program might not be initialized when the function returns.
<p>
This function is only implemented for QNX6. It should be used in programs were the control loop must run in a separate thread. <dl compact><dt>
<b>Returns: </b><dd>
 The pthread_t structure of the new thread. </dl>    </td>
  </tr>
</table>
<a name="a6" doxytag="ControlProgram::runInThreadBlocking"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
pthread_t runInThreadBlocking (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is only implemented for QNX6. It spawns a new thread and starts the control program in this new thread (i.e., it calls <a class="el" href="class_ControlProgram.html#a3">run</a>() in this new thread).
<p>
As opposed to <a class="el" href="class_ControlProgram.html#a5">runInThread</a>(), this function blocks until the control loop is initialized, connected to the QMotor GUI (in supervisor mode) and <a class="el" href="class_ControlProgram.html#b0">enterControl</a>() is called.
<p>
This function is only implemented for QNX6. It should be used in programs were the control loop must run in a separate thread. <dl compact><dt>
<b>Returns: </b><dd>
 The pthread_t structure of the new thread. </dl>    </td>
  </tr>
</table>
<a name="a7" doxytag="ControlProgram::waitForStart"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int waitForStart (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function blocks until the control program is started. The function returns immediately if the control program is already running. <dl compact><dt>
<b>Returns: </b><dd>
 0: Control program has started, 1: Control program start was aborted. </dl>    </td>
  </tr>
</table>
<a name="a8" doxytag="ControlProgram::stopControlLoopInThread"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void stopControlLoopInThread (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Stops the control loop that runs in a separate thread. Calling this function is equivalent with hitting the "Stop" button in the GUI, control time running out, or a control stop in case of an error. The user defined <a class="el" href="class_ControlProgram.html#b5">stopControl</a>() is called and the thread terminates.
<p>
This function is only implemented for QNX6. It should be used in programs were the control loop must run in a separate thread.     </td>
  </tr>
</table>
<a name="a9" doxytag="ControlProgram::isControlProgramRunningInThread"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int isControlProgramRunningInThread (
          </b></td>
          <td valign="bottom"><b>
)<code> [inline]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Determines if currently the control program is being executed in a separate thread.
<p>
This function is only implemented for QNX6. It should be used in programs were the control loop must run in a separate thread. <dl compact><dt>
<b>Returns: </b><dd>
 1: A separate thread currently executes the control program, 0 otherwise. </dl>    </td>
  </tr>
</table>
<a name="a10" doxytag="ControlProgram::setMasterMode"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void setMasterMode (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the master mode of the control program. Call this function in <a class="el" href="class_ControlProgram.html#b0">enterControl</a>() or earlier. Default is slave mode.
<p>
If the GUI attaches to a control program that runs in master mode, the GUI switches to slave mode. In slave mode, the user cannot stop the control program by hitting the "Stop" button. This mode is useful in multithreaded programs where it is important that all threads work together and none is stopped.
<p>
If the user hits stop from the GUI, the control loop won't be stopped but the user can use the log data from the control run. The user won't be able to restart the control program.     </td>
  </tr>
</table>
<a name="a11" doxytag="ControlProgram::isMasterMode"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int isMasterMode (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Determines if the control program is locked into master mode. <dl compact><dt>
<b>Returns: </b><dd>
 1: Control program is in master mode, 0: Control program is in slave mode (default). </dl>    </td>
  </tr>
</table>
<a name="a12" doxytag="ControlProgram::setAutorunGUIOn"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void setAutorunGUIOn (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Enables the automatic startup of the QMotor GUI, i.e., when the control program is run (call to <a class="el" href="class_ControlProgram.html#a3">run</a>()), the QMotor GUI is started and connected to the control program. By default, this feature is disabled. It cannot be enabled, if the control program was started from the GUI.     </td>
  </tr>
</table>
<a name="a13" doxytag="ControlProgram::setAutorunGUIOff"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void setAutorunGUIOff (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Disables the automatic startup of the QMotor GUI, i.e., when the control program is run (call to <a class="el" href="class_ControlProgram.html#a3">run</a>()), the QMotor GUI is started and connected to the control program. By default, this feature is disabled.     </td>
  </tr>
</table>
<a name="a14" doxytag="ControlProgram::isAutorunGUIOn"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int isAutorunGUIOn (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Determines if the automatic startup of the QMotor GUI is enabled. <dl compact><dt>
<b>Returns: </b><dd>
 1: The automatic startup of the GUI is enabled, 0: The automatic startup of the GUI is disabled. </dl>    </td>
  </tr>
</table>
<a name="a15" doxytag="ControlProgram::enableSupervisorMode"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void enableSupervisorMode (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Enables the supervisor mode, i.e., the control program can be loaded from the QMotor GUI. This is the default.     </td>
  </tr>
</table>
<a name="a16" doxytag="ControlProgram::disableSupervisorMode"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void disableSupervisorMode (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Disables the supervisor mode, i.e., it is not possible to use this control program from the QMotor GUI. This function must be used when a program spawns multiple threads that instantiate multiple ControlProgram objects. The supervisor mode must be disabled for all threads except the one that will be used for tuning from the GUI.     </td>
  </tr>
</table>
<a name="a17" doxytag="ControlProgram::isSupervisorModeEnabled"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int isSupervisorModeEnabled (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Determines if the supervisor mode is enabled. <dl compact><dt>
<b>Returns: </b><dd>
 1: The supervisor mode is enabled, 0: The supervisor mode is not enabled. </dl>    </td>
  </tr>
</table>
<a name="a18" doxytag="ControlProgram::enableSignalHandling"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void enableSignalHandling (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Enables the handling of signals, e.g. SIGINT as created by CTRL-C will cause that the control loop stops and that the <a class="el" href="class_ControlProgram.html#b5">stopControl</a>() function is called. Signal handling is enabled by default.     </td>
  </tr>
</table>
<a name="a19" doxytag="ControlProgram::disableSignalHandling"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void disableSignalHandling (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Disables the handling of signals.     </td>
  </tr>
</table>
<a name="a20" doxytag="ControlProgram::isSignalHandlingEnabled"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int isSignalHandlingEnabled (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Determines if signal handling by QMotor is enabled. <dl compact><dt>
<b>Returns: </b><dd>
 1: Signal handling is enabled, 0: Signal handling is not enabled. </dl>    </td>
  </tr>
</table>
<a name="b0" doxytag="ControlProgram::enterControl"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int enterControl (
          </b></td>
          <td valign="bottom"><b>
)<code> [protected, virtual]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is called when the control program is loaded. In  standalone mode, this happens immediately. When using the GUI, it  happens when the user loads the control program. Use this function in  your derived class to register control parameters/log variables and to  initialize control parameters. After this function has completed, the  base class ControlProgram will try to load a configuration file and  eventually overwrite the initialized values. To indicate an error in  enterControl and to prevent the loading of the control, set the d_status data member to error or return a non-zero value (<a class="el" href="class_ControlProgram.html#b6">exitControl</a>() won't be  called in this case).
<p>
<dl compact><dt>
<b>Returns: </b><dd>
 0: Loading the control was successful,  Non-Zero: Error occurred in <a class="el" href="class_ControlProgram.html#b0">enterControl</a>().
<p>
</dl><b>Example:</b>
<p>
<div class="fragment"><pre>     <font class="keywordtype">int</font> MyControlProgram::enterControl()<font class="keyword"></font>
<font class="keyword">     </font>{
       d_runForever = 0;
       d_controlFrequency = 1000;
       d_controlDuration = 10;
       registerControlParameter(&amp;kp, <font class="stringliteral">"kp"</font>, <font class="stringliteral">"Proportional Gain"</font>);
       registerLogVariable(&amp;voltage, <font class="stringliteral">"voltage"</font>, <font class="stringliteral">"Output voltage"</font>);
       <font class="keywordflow">return</font> 0;
     }</div></pre>     </td>
  </tr>
</table>
<a name="b1" doxytag="ControlProgram::readConfiguration"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int readConfiguration (
          </b></td>
          <td valign="bottom"><b>
)<code> [protected, virtual]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is called right after <a class="el" href="class_ControlProgram.html#b0">enterControl</a>() and every time a new  configuration is loaded in the GUI. Use this function to read custom  settings from the configuration file.
<p>
To indicate an error in <a class="el" href="class_ControlProgram.html#b1">readConfiguration</a>() and to prevent the loading of  the control, set the d_status data member to error or return a non-zero  value (<a class="el" href="class_ControlProgram.html#b6">exitControl</a>() won't be called in this case). <dl compact><dt>
<b>Returns: </b><dd>
 0: Reading the configuration was successful,  Non-Zero: Error reading the configuration
<p>
</dl><b>Example:</b>
<p>
<div class="fragment"><pre>     <font class="keywordtype">int</font> MyControlProgram:: readConfiguration ()<font class="keyword"></font>
<font class="keyword">     </font>{
       d_config.setCurrentSectionName(<font class="stringliteral">"MyControlSettings"</font>);
       d_inputFile = d_config.getStringEntry(<font class="stringliteral">"inputFile"</font>, <font class="stringliteral">"default.inp"</font>);
       <font class="keywordflow">return</font> 0;
     }</div></pre>     </td>
  </tr>
</table>
<a name="b2" doxytag="ControlProgram::startControl"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int startControl (
          </b></td>
          <td valign="bottom"><b>
)<code> [protected, virtual]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is called when the control is started. In standalone mode,  this happens immediately after <a class="el" href="class_ControlProgram.html#b0">enterControl</a>() has been called. When  using the GUI, it happens when the user hits the "Start" button. Use  this function in your derived class to connect to servers (e.g., an I/O  board server) and to initialize log variables. Do not change control  parameters in this function otherwise control parameters set in the GUI  will be overwritten. To indicate an error in <a class="el" href="class_ControlProgram.html#b2">startControl</a>() and to prevent  control execution, set the d_status data member to error and return a  non-zero value.
<p>
<dl compact><dt>
<b>Returns: </b><dd>
 0: Continue control execution,  Non-Zero: terminate control execution (<a class="el" href="class_ControlProgram.html#b5">stopControl</a>() won't be called)
<p>
</dl><b>Example:</b>
<p>
<div class="fragment"><pre>     <font class="keywordtype">void</font> MyControlProgram::startControl()<font class="keyword"></font>
<font class="keyword">     </font>{
       d_safetyStopFlag = 0;
       d_iobc = <font class="keyword">new</font> IOBoardClient(<font class="stringliteral">"qrts/iobs0"</font>);
       <font class="keywordflow">if</font> (d_iobc-&gt;isStatusError())
       {
         d_status-&gt;setStatusError()
           &lt;&lt; <font class="stringliteral">"Cannot connect to IO board server"</font> &lt;&lt; endl;
         <font class="keywordflow">return</font> -1;
       }
       <font class="keywordflow">return</font> 0;
     }</div></pre>     </td>
  </tr>
</table>
<a name="b3" doxytag="ControlProgram::control"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int control (
          </b></td>
          <td valign="bottom"><b>
)<code> [protected, virtual]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is called every control cycle at a frequency specified by  the data member d_controlFrequency. Use this function to implement your  control algorithm. To indicate an error in startControl and to prevent  further control execution, set the d_status data member to error and  return a non-zero value. <dl compact><dt>
<b>Returns: </b><dd>
 0: Continue control execution,  Non-Zero: terminate control execution (<a class="el" href="class_ControlProgram.html#b5">stopControl</a>() will still be called)
<p>
</dl><b>Example: </b>
<p>
<div class="fragment"><pre>     <font class="keywordtype">int</font> MyControlProgram::control()<font class="keyword"></font>
<font class="keyword">     </font>{
       q = iobc-&gt;getAdcValue(0);
       qd =  iobc-&gt;getAdcValue(1);
       error = qd - q;
       outputVoltage = kp * error;
       <font class="keywordflow">if</font> (outputVoltage &gt; 5.0)
       {
         d_status.setStatusError()
           &lt;&lt; <font class="stringliteral">"Control voltage exceeds limits"</font> &lt;&lt; endl;
         <font class="keywordflow">return</font> -1;
       }
    
       iobc-&gt;setDacValue(0, outputVoltage);
       <font class="keywordflow">return</font> 0;
     }</div></pre>     </td>
  </tr>
</table>
<a name="b4" doxytag="ControlProgram::startControlProgramShutdown"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int startControlProgramShutdown (
          </b></td>
          <td valign="bottom"><b>
)<code> [protected, virtual]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called when the control is stopped (right before <a class="el" href="class_ControlProgram.html#b5">stopControl</a>()). Return 1 to continue the control in a shutdown mode, return 0 if no shutdown is required (which is the default). If 0 is returned by this function, <a class="el" href="class_ControlProgram.html#b5">stopControl</a>() is called right after it, otherwise <a class="el" href="class_ControlProgram.html#b5">stopControl</a>() is called after <a class="el" href="class_ControlProgram.html#b9">shutdownComplete</a>() is called.
<p>
<dl compact><dt>
<b>Returns: </b><dd>
 0: No Shutdown mode, stop control now. <br>
  1: Initiate Shutdown mode. </dl>    </td>
  </tr>
</table>
<a name="b5" doxytag="ControlProgram::stopControl"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int stopControl (
          </b></td>
          <td valign="bottom"><b>
)<code> [protected, virtual]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is called when the control routine has finished. This  happens when the control duration has reached, the user hits CTRL-C, the  control aborts itself by setting the status to error, or the user hits  the "Stop" button in the GUI. Use this function in your derived class to  zero out DAC value and to disconnect from the servers (e.g., an I/O  board server). To indicate an error in stopControl, set the d_status data member to error and return a non-zero value.
<p>
<dl compact><dt>
<b>Returns: </b><dd>
 0: Stopping the control was successful,  Non-Zero: Error stopping the control.
<p>
</dl><b>Example:</b>
<p>
<div class="fragment"><pre>     <font class="keywordtype">int</font> MyControlProgram::stopControl()<font class="keyword"></font>
<font class="keyword">     </font>{
       iobc-&gt;setDacValue(0, 0);
       <font class="keyword">delete</font> iobc;
       <font class="keywordflow">return</font> 0;
     }</div></pre>     </td>
  </tr>
</table>
<a name="b6" doxytag="ControlProgram::exitControl"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int exitControl (
          </b></td>
          <td valign="bottom"><b>
)<code> [protected, virtual]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is called when the control is unloaded. In standalone  mode, this happens after one control run has completed. When using the  GUI, it happens when the user loads a new control program or exits the  GUI. This function could be used to cleanup allocated memory. <dl compact><dt>
<b>Returns: </b><dd>
 0: Exit control was successful, Non-Zero: Error exiting the control.
<p>
</dl><b>Example:</b>
<p>
<div class="fragment"><pre>     <font class="keywordtype">int</font> MyControlProgram::exitControl()<font class="keyword"></font>
<font class="keyword">     </font>{
       <font class="comment">// delete memory for filter</font>
       <font class="keyword">delete</font> filter;
       <font class="keywordflow">return</font> 0;
     }</div></pre>     </td>
  </tr>
</table>
<a name="b7" doxytag="ControlProgram::handleMessage"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int handleMessage (
          </b></td>
          <td valign="bottom"><b>
pid_t <em>pid</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
char * <em>message</em>&nbsp;)<code> [protected, virtual]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is not required for normal control implementation. It is  usually used for special applications by advanced users. It allows to  receive messages that are sent with the QNX message passing  functions Send() (in QNX 4) and msgSend (in QNX 6), the sendMessage()  function of the class Client, and related functions. Messages are received (and this  function is called) while the control program waits for a "start" from  the GUI as well as while the control is running. By using the  <a class="el" href="class_ControlProgram.html#b7">handleMessage</a>(), a client/server relationship can be established with  the control program working as a server and an external program working  as a client. For example, a control program could receive desired  setpoints from an external program using this mechanism. Note: The  message buffer has a size of 4096 bytes. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>pid</em>
&nbsp;</td><td>
 Process ID of the sender. </td></tr>
<tr><td valign=top><em>message</em>
&nbsp;</td><td>
 Message sent. </td></tr>
</table>
</dl><dl compact><dt>
<b>Returns: </b><dd>
 0: Proceed with control (if control is running) <br>
 -1: Terminate control  (if control is running)
<p>
</dl><b>Example:</b>
<p>
<div class="fragment"><pre>      <font class="keywordtype">int</font> MyControlProgram::handleMessage()<font class="keyword"></font>
<font class="keyword">      </font>{
        <font class="keywordtype">int</font> intMsg = *((<font class="keywordtype">int</font> *) message;
        <font class="keywordflow">if</font> (intMsg == STOP_CONTROL)
        {
          d_status.setStatusError() &lt;&lt; <font class="stringliteral">"Stop message received"</font> &lt;&lt; endl;
          <font class="keywordflow">return</font>  -1;
        }
        <font class="keywordflow">if</font> (intMsg == REVERSE_DIRECTION)
          direction = - direction;
        <font class="keywordflow">return</font> 0;
      }</div></pre>     </td>
  </tr>
</table>
<a name="b8" doxytag="ControlProgram::onControlProgramError"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void onControlProgramError (
          </b></td>
          <td valign="bottom"><b>
int <em>errorCode</em>&nbsp;)<code> [protected, virtual]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is not required for normal control implementation. It is  usually used for special applications by advanced users. It is called if a function called by the framework sets the status to error. This can happen when an internal control program error occurs (e.g., can't instantiate timer), or d_status is set to error in one of the virtual functions reimplemented by the user. This class prints the status message on the screen if the execution mode is standalone mode or the error resulted from an error in the communication with the GUI. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>errorCode</em>
&nbsp;</td><td>
 Indicates where the error occurred:<br>
 <b>e_errorInEnterControl</b>: Error occurred in <a class="el" href="class_ControlProgram.html#b0">enterControl</a>().<br>
 <b>e_errorInReadConfiguration</b>: Error occurred while reading the configuration, or in <a class="el" href="class_ControlProgram.html#b1">readConfiguration</a>().<br>
 <b>e_errorInStartControl</b>: Error occurred when starting the control, or in <a class="el" href="class_ControlProgram.html#b2">startControl</a>().<br>
 <b>e_errorInControlLoop</b>: Error occurred while executing the control loop, or in <a class="el" href="class_ControlProgram.html#b3">control</a>().<br>
 <b>e_errorInStopControl</b>: Error occurred in <a class="el" href="class_ControlProgram.html#b5">stopControl</a>().<br>
 <b>e_errorAfterControlRun</b>: Error occurred after the control run (e.g., when writing the logs).<br>
 <b>e_errorInExitControl</b>: Error occurred in <a class="el" href="class_ControlProgram.html#b6">exitControl</a>().<br>
 <b>e_errorInGUICommunication</b>: Error occurred in communication with the GUI. </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a21" doxytag="ControlProgram::registerLogVariable"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void registerLogVariable (
          </b></td>
          <td valign="bottom"><b>
double * <em>address</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const char * <em>name</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const char * <em>description</em> = "", 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
int <em>numRows</em> = 1, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
int <em>numColums</em> = 1&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Registers a C++ variable of type "double" as a log variable. The consequence is that the  variable will be logged according to its log mode and settings. It is  possible to log double and int variables. It is also possible to log  arrays as vectors (set numRows the number of array elements and do not specify the numColumms)  or matrices (specify numRows and numColums).<dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>address</em>
&nbsp;</td><td>
 Address of the C++ variable. Please note that when logging scalar variables, you need to use the "&amp;" operator to determine the address of  the variables. This is not required for arrays (see examples). </td></tr>
<tr><td valign=top><em>name</em>
&nbsp;</td><td>
 Name of the log variable. You should use the name under which the variable has been declared. This name appears in the QMotor GUI in the list of  log variables. It is also used for setting log parameters. </td></tr>
<tr><td valign=top><em>description</em>
&nbsp;</td><td>
 A detailed description of the function of the variable. This string appears in the QMotor GUI when the user moves the mouse cursor over the log variable and allows it to remain there for a brief time interval. </td></tr>
<tr><td valign=top><em>numRows</em>
&nbsp;</td><td>
 Number of rows (in case of a vector or matrix). </td></tr>
<tr><td valign=top><em>numColumns</em>
&nbsp;</td><td>
 Number of columns (in case of a matrix).
<p>
</td></tr>
</table>
</dl><b>Example:</b>
<p>
<div class="fragment"><pre>     <a class="code" href="class_ControlProgram.html#a21">registerLogVariable</a>(&amp;voltage, <font class="stringliteral">"voltage"</font>, <font class="stringliteral">"Control Voltage"</font>);
     <a class="code" href="class_ControlProgram.html#a21">registerLogVariable</a>(velocity, velocity, <font class="stringliteral">"Velocity Vector"</font>, 4);</div></pre>     </td>
  </tr>
</table>
<a name="a22" doxytag="ControlProgram::registerLogVariable"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void registerLogVariable (
          </b></td>
          <td valign="bottom"><b>
int * <em>address</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const char * <em>name</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const char * <em>description</em> = "", 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
int <em>numRows</em> = 1, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
int <em>numColums</em> = 1&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Registers a C++ variable of type "int" as a log variable. For a description see  <em>registerLogVariable(double</em> *address, ...). <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>address</em>
&nbsp;</td><td>
 Address of the C++ variable of type int. </td></tr>
<tr><td valign=top><em>name</em>
&nbsp;</td><td>
 Name of the log variable. </td></tr>
<tr><td valign=top><em>description</em>
&nbsp;</td><td>
 Description of the log variable. </td></tr>
<tr><td valign=top><em>numRows</em>
&nbsp;</td><td>
 Number of rows (in case of a vector or matrix). </td></tr>
<tr><td valign=top><em>numColumns</em>
&nbsp;</td><td>
 Number of columns (in case of a matrix). </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a23" doxytag="ControlProgram::registerLogVariable"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void registerLogVariable (
          </b></td>
          <td valign="bottom"><b>
MatrixBase&lt; double &gt;&amp; <em>matrix</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const char * <em>name</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const char * <em>description</em> = ""&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Registers a double matrix or a double vector of the QRTS math library as a log variable. For a description see  <em>registerLogVariable(double</em> *address, ...). <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>matrix</em>
&nbsp;</td><td>
 The matrix or the vector. </td></tr>
<tr><td valign=top><em>name</em>
&nbsp;</td><td>
 Name of the log variable. </td></tr>
<tr><td valign=top><em>description</em>
&nbsp;</td><td>
 Description of the log variable. </td></tr>
<tr><td valign=top><em>numRows</em>
&nbsp;</td><td>
 Number of rows (in case of a vector or matrix). </td></tr>
<tr><td valign=top><em>numColumns</em>
&nbsp;</td><td>
 Number of columns (in case of a matrix). </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a24" doxytag="ControlProgram::registerLogVariable"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void registerLogVariable (
          </b></td>
          <td valign="bottom"><b>
MatrixBase&lt; int &gt;&amp; <em>matrix</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const char * <em>name</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const char * <em>description</em> = ""&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Registers a int matrix or a int vector of the QRTS math library as a log variable. For a description see  <em>registerLogVariable(double</em> *address, ...). <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>matrix</em>
&nbsp;</td><td>
 The matrix or the vector. </td></tr>
<tr><td valign=top><em>name</em>
&nbsp;</td><td>
 Name of the log variable. </td></tr>
<tr><td valign=top><em>description</em>
&nbsp;</td><td>
 Description of the log variable. </td></tr>
<tr><td valign=top><em>numRows</em>
&nbsp;</td><td>
 Number of rows (in case of a vector or matrix). </td></tr>
<tr><td valign=top><em>numColumns</em>
&nbsp;</td><td>
 Number of columns (in case of a matrix). </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a25" doxytag="ControlProgram::registerControlParameter"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void registerControlParameter (
          </b></td>
          <td valign="bottom"><b>
double * <em>address</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const char * <em>name</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const char * <em>description</em> = "", 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
int <em>numRows</em> = 1, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
int <em>numColums</em> = 1&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Registers a C++ variable as a control parameter. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>address</em>
&nbsp;</td><td>
 Address of the C++ variable. Please note the "&amp;" operator is  needed to specify the address of a simple/scalar control variable. This  is not required for arrays (see examples). </td></tr>
<tr><td valign=top><em>name</em>
&nbsp;</td><td>
 Name of the control parameter. You should use the name under which the variable has been  declared. This name appears in the QMotor GUI in the list of control parameters.  </td></tr>
<tr><td valign=top><em>description</em>
&nbsp;</td><td>
 A detailed description of the function of the control  variable. This string appears in the QMotor GUI when the user  moves the mouse cursor over the control parameter and allows  it to remain there for a brief time interval. </td></tr>
<tr><td valign=top><em>numRows</em>
&nbsp;</td><td>
 Number of rows (in case of a vector or matrix). </td></tr>
<tr><td valign=top><em>numColumns</em>
&nbsp;</td><td>
 Number of columns (in case of a matrix).
<p>
</td></tr>
</table>
</dl><b>Example:</b>
<p>
<div class="fragment"><pre>     <a class="code" href="class_ControlProgram.html#a25">registerControlParameter</a>(&amp;voltage, <font class="stringliteral">"voltage"</font>, <font class="stringliteral">"Control Voltage"</font>);
     <a class="code" href="class_ControlProgram.html#a25">registerControlParameter</a>(velocity, velocity, <font class="stringliteral">"Velocity Vector"</font>, 4);</div></pre>     </td>
  </tr>
</table>
<a name="a26" doxytag="ControlProgram::registerControlParameter"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void registerControlParameter (
          </b></td>
          <td valign="bottom"><b>
int * <em>address</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const char * <em>name</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const char * <em>description</em> = "", 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
int <em>numRows</em> = 1, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
int <em>numColums</em> = 1&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Registers a C++ variable as a control parameter. For a description, see <em>registerControlParameter(double</em> *address, ...) <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>address</em>
&nbsp;</td><td>
 Address of the C++ variable of type int. </td></tr>
<tr><td valign=top><em>name</em>
&nbsp;</td><td>
 Name of the control parameter. </td></tr>
<tr><td valign=top><em>description</em>
&nbsp;</td><td>
 Description of the control parameter. </td></tr>
<tr><td valign=top><em>numRows</em>
&nbsp;</td><td>
 Number of rows (in case of a vector or matrix). </td></tr>
<tr><td valign=top><em>numColumns</em>
&nbsp;</td><td>
 Number of columns (in case of a matrix). </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a27" doxytag="ControlProgram::registerControlParameter"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void registerControlParameter (
          </b></td>
          <td valign="bottom"><b>
MatrixBase&lt; double &gt;&amp; <em>matrix</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const char * <em>name</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const char * <em>description</em> = ""&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Registers a int matrix or a int vector of the QRTS math library as a control parameter. For a description, see <em>registerControlParameter(double</em> *address, ...) <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>address</em>
&nbsp;</td><td>
 Address of the C++ variable of type int. </td></tr>
<tr><td valign=top><em>name</em>
&nbsp;</td><td>
 Name of the control parameter. </td></tr>
<tr><td valign=top><em>description</em>
&nbsp;</td><td>
 Description of the control parameter. </td></tr>
<tr><td valign=top><em>numRows</em>
&nbsp;</td><td>
 Number of rows (in case of a vector or matrix). </td></tr>
<tr><td valign=top><em>numColumns</em>
&nbsp;</td><td>
 Number of columns (in case of a matrix). </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a28" doxytag="ControlProgram::registerControlParameter"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void registerControlParameter (
          </b></td>
          <td valign="bottom"><b>
MatrixBase&lt; int &gt;&amp; <em>matrix</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const char * <em>name</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const char * <em>description</em> = ""&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Registers a int matrix or a int vector of the QRTS math library as a control parameter. For a description, see <em>registerControlParameter(double</em> *address, ...) <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>address</em>
&nbsp;</td><td>
 Address of the C++ variable of type int. </td></tr>
<tr><td valign=top><em>name</em>
&nbsp;</td><td>
 Name of the control parameter. </td></tr>
<tr><td valign=top><em>description</em>
&nbsp;</td><td>
 Description of the control parameter. </td></tr>
<tr><td valign=top><em>numRows</em>
&nbsp;</td><td>
 Number of rows (in case of a vector or matrix). </td></tr>
<tr><td valign=top><em>numColumns</em>
&nbsp;</td><td>
 Number of columns (in case of a matrix). </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a29" doxytag="ControlProgram::clearAllLogVariables"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void clearAllLogVariables (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets all registered log variables to zero.
<p>
<b>Example:</b>
<p>
<div class="fragment"><pre>     <a class="code" href="class_ControlProgram.html#a29">clearAllLogVariables</a>();</div></pre>     </td>
  </tr>
</table>
<a name="a30" doxytag="ControlProgram::clearAllControlParameters"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void clearAllControlParameters (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets all control parameters control parameters to zero.
<p>
<b>Example:</b>
<p>
<div class="fragment"><pre>     <a class="code" href="class_ControlProgram.html#a30">clearAllControlParameters</a>();</div></pre>     </td>
  </tr>
</table>
<a name="a31" doxytag="ControlProgram::setNoLogMode"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void setNoLogMode (
          </b></td>
          <td valign="bottom"><b>
const char * <em>variableName</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Disables logging for a certain variable. Use this function in <a class="el" href="class_ControlProgram.html#b0">enterControl</a>() to set logging mode.  Note: If there is a configuration file present, then logging modes are  automatically loaded and set from this configuration file. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>variableName</em>
&nbsp;</td><td>
 Variable name.
<p>
</td></tr>
</table>
</dl><b>Example:</b>
<p>
<div class="fragment"><pre>     <a class="code" href="class_ControlProgram.html#a31">setNoLogMode</a>(<font class="stringliteral">"voltage"</font>);</div></pre>     </td>
  </tr>
</table>
<a name="a32" doxytag="ControlProgram::setContinuousLogMode"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void setContinuousLogMode (
          </b></td>
          <td valign="bottom"><b>
const char * <em>variableName</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The N most recent seconds worth of log data will be kept (N==duration). Use this function in <a class="el" href="class_ControlProgram.html#b0">enterControl</a>() to set logging mode.  Note: If there is a configuration file present, then logging modes are  automatically loaded and set from this configuration file.     </td>
  </tr>
</table>
<a name="a33" doxytag="ControlProgram::setTimedLogMode"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void setTimedLogMode (
          </b></td>
          <td valign="bottom"><b>
const char * <em>variableName</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets timed mode for the specified variable. In this logging mode, the  logging starts at the time specified with <a class="el" href="class_ControlProgram.html#a40">setLogStartTime</a>() with a  duration that is specified with <em><a class="el" href="class_ControlProgram.html#a38">setLogDuration</a>()</em>. Use this function in <a class="el" href="class_ControlProgram.html#b0">enterControl</a>() to set logging mode.  Note: If there is a configuration file present, then logging modes are  automatically loaded and set from this configuration file.  <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>variableName</em>
&nbsp;</td><td>
 Variable name.
<p>
</td></tr>
</table>
</dl><b>Example:</b>
<p>
<div class="fragment"><pre>     <font class="keywordtype">void</font> <a class="code" href="class_ControlProgram.html#a33">setTimedLogMode</a>(<font class="stringliteral">"voltage"</font>);</div></pre>     </td>
  </tr>
</table>
<a name="a34" doxytag="ControlProgram::setEventTriggeredLogMode"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void setEventTriggeredLogMode (
          </b></td>
          <td valign="bottom"><b>
const char * <em>variableName</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets event triggered logging mode for the specified variable. In this  logging mode, the logging can be enabled and disabled one time by using  the functions <a class="el" href="class_ControlProgram.html#a36">startLogging</a>() and <a class="el" href="class_ControlProgram.html#a37">stopLogging</a>(). Use this function in <a class="el" href="class_ControlProgram.html#b0">enterControl</a>() to set logging mode.  Note: If there is a configuration file present, then logging modes are  automatically loaded and set from this configuration file. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>variableName</em>
&nbsp;</td><td>
 Variable name.
<p>
</td></tr>
</table>
</dl><b>Example:</b>
<p>
<div class="fragment"><pre>     <a class="code" href="class_ControlProgram.html#a34">setEventTriggeredLogMode</a>(<font class="stringliteral">"voltage"</font>);</div></pre>     </td>
  </tr>
</table>
<a name="a35" doxytag="ControlProgram::getLogVariableHandle"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int getLogVariableHandle (
          </b></td>
          <td valign="bottom"><b>
const char * <em>variableName</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Use this function in <a class="el" href="class_ControlProgram.html#b0">enterControl</a>() or <a class="el" href="class_ControlProgram.html#b2">startControl</a>(). Returns a handle  to a given log variable. This handle is required for the following two  functions, <a class="el" href="class_ControlProgram.html#a36">startLogging</a>() and <a class="el" href="class_ControlProgram.html#a37">stopLogging</a>(). A handle instead of a  variable name is used to identify a log variable because <a class="el" href="class_ControlProgram.html#a36">startLogging</a>() and <a class="el" href="class_ControlProgram.html#a37">stopLogging</a>() are used during the real-time control and it could be too  time consuming to search for the variable by its name. <dl compact><dt>
<b>Returns: </b><dd>
 A handle to the log variable. <br>
 -1 if the variable cannot be found.
<p>
</dl><b>Example:</b>
<p>
<div class="fragment"><pre>     voltageHandle = <a class="code" href="class_ControlProgram.html#a35">getLogVariableHandle</a>(<font class="stringliteral">"voltage"</font>);</div></pre>     </td>
  </tr>
</table>
<a name="a36" doxytag="ControlProgram::startLogging"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void startLogging (
          </b></td>
          <td valign="bottom"><b>
int <em>logVariableHandle</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Starts logging for the specified variable or all variables with event  triggered logging mode. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>logVariableHandle</em>
&nbsp;</td><td>
 A handle to the log variable for which logging should  be started.
<p>
</td></tr>
</table>
</dl><b>Example:</b>
<p>
<div class="fragment"><pre>     <a class="code" href="class_ControlProgram.html#a36">startLogging</a>(voltageHandle);</div></pre>     </td>
  </tr>
</table>
<a name="a37" doxytag="ControlProgram::stopLogging"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void stopLogging (
          </b></td>
          <td valign="bottom"><b>
int <em>logVariableHandle</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Stops logging for the specified variable or all variables with event  triggered logging mode. Logging cannot be started again for this  variable. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>logVariableHandle</em>
&nbsp;</td><td>
 A handle to the log variable for which logging should  be stopped.
<p>
</td></tr>
</table>
</dl><b>Example:</b>
<p>
<div class="fragment"><pre>     <a class="code" href="class_ControlProgram.html#a37">stopLogging</a>(voltageHandle);</div></pre>     </td>
  </tr>
</table>
<a name="a38" doxytag="ControlProgram::setLogDuration"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void setLogDuration (
          </b></td>
          <td valign="bottom"><b>
const char * <em>variableName</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
double <em>logDuration</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the log duration for variables with continuous and timed logging mode. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>variableName</em>
&nbsp;</td><td>
 Variable name. </td></tr>
<tr><td valign=top><em>logDuration</em>
&nbsp;</td><td>
 Log duration specified in seconds.
<p>
</td></tr>
</table>
</dl><b>Example:</b>
<p>
<div class="fragment"><pre>     <a class="code" href="class_ControlProgram.html#a38">setLogDuration</a>(<font class="stringliteral">"voltage"</font>, 5.0); <font class="comment">// 5 seconds</font></div></pre>     </td>
  </tr>
</table>
<a name="a39" doxytag="ControlProgram::setLogFrequency"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void setLogFrequency (
          </b></td>
          <td valign="bottom"><b>
const char * <em>variableName</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
double <em>logFrequency</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the log frequency of a log variable. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>variableName</em>
&nbsp;</td><td>
 Variable name. </td></tr>
<tr><td valign=top><em>logFrequencyLog</em>
&nbsp;</td><td>
 Frequency specified in Hz.
<p>
</td></tr>
</table>
</dl><b>Example:</b>
<p>
<div class="fragment"><pre>     <a class="code" href="class_ControlProgram.html#a39">setLogFrequency</a>(<font class="stringliteral">"voltage"</font>, 1000); <font class="comment">// 1KHz</font></div></pre>     </td>
  </tr>
</table>
<a name="a40" doxytag="ControlProgram::setLogStartTime"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void setLogStartTime (
          </b></td>
          <td valign="bottom"><b>
const char * <em>variableName</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
double <em>logStartTime</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the log start time for the specified variable with timed logging mode. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>variableName</em>
&nbsp;</td><td>
 Variable name. </td></tr>
<tr><td valign=top><em>logStartTimeLog</em>
&nbsp;</td><td>
 Start time specified in seconds.
<p>
</td></tr>
</table>
</dl><b>Example:</b>
<p>
<div class="fragment"><pre>     <a class="code" href="class_ControlProgram.html#a40">setLogStartTime</a>(<font class="stringliteral">"voltage"</font>, 60);
     <a class="code" href="class_ControlProgram.html#a38">setLogDuration</a>(<font class="stringliteral">"voltage"</font>, 30);
     <font class="comment">// Start logging after a minute, then log for 30 seconds</font></div></pre>     </td>
  </tr>
</table>
<a name="a41" doxytag="ControlProgram::setConfigurationFileName"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void setConfigurationFileName (
          </b></td>
          <td valign="bottom"><b>
const char * <em>configurationFileName</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets a different configuration filename than the default one or the one specified in the command line. Call this  function right after calling the constructor, or call it from the constructor. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>configurationFileName</em>
&nbsp;</td><td>
 The new filename of the configuration. </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a42" doxytag="ControlProgram::isControlRunning"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int isControlRunning (
          </b></td>
          <td valign="bottom"><b>
) const<code> [inline]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Determines if the control is running. <dl compact><dt>
<b>Returns: </b><dd>
 1: Control is running. <br>
 0: Control is not running. </dl>    </td>
  </tr>
</table>
<a name="a43" doxytag="ControlProgram::isControlShuttingDown"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int isControlShuttingDown (
          </b></td>
          <td valign="bottom"><b>
) const<code> [inline]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Determines if the control is in shutdown mode. <dl compact><dt>
<b>Returns: </b><dd>
 1: Control is in shutdown mode. <br>
 0: Control is not in shutdown mode. </dl>    </td>
  </tr>
</table>
<a name="a44" doxytag="ControlProgram::wasShutdownAborted"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int wasShutdownAborted (
          </b></td>
          <td valign="bottom"><b>
) const<code> [inline]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Determines if the control shutdown was aborted by a repeated click on the STOP button. Use this function in <a class="el" href="class_ControlProgram.html#b5">stopControl</a>() to determine if the shutdown process was completed. <dl compact><dt>
<b>Returns: </b><dd>
 1: Control shutdown was aborted. <br>
 0: Control terminated normally. </dl>    </td>
  </tr>
</table>
<a name="b9" doxytag="ControlProgram::shutdownComplete"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void shutdownComplete (
          </b></td>
          <td valign="bottom"><b>
)<code> [inline, protected]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Call this function to indicate that Shutdown is complete. The control will stop after the current control cycle.  Calling this method has no effect if the control is not in shutdown mode.     </td>
  </tr>
</table>
<a name="a45" doxytag="ControlProgram::getControlCycleCPUTime"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
double getControlCycleCPUTime (
          </b></td>
          <td valign="bottom"><b>
)<code> [inline]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the time in seconds that was consumed while executing one control cycle     </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a name="m0" doxytag="ControlProgram::d_controlFrequency"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
double d_controlFrequency
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Control frequency in Hz. Set this value in <a class="el" href="class_ControlProgram.html#b0">enterControl</a>(). Default is 1000 Hz. Note: If a configuration file is present, this value will be automatically  set from it, immediately before <a class="el" href="class_ControlProgram.html#b2">startControl</a>() is called.
<p>
<b>Example:</b>
<p>
<div class="fragment"><pre>     d_runForever = 0;
     d_controlDuration = 1;
     d_controlFrequency = 1500    </div></pre>     </td>
  </tr>
</table>
<a name="m1" doxytag="ControlProgram::d_controlPeriod"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
double d_controlPeriod
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The control period. This value is automatically set to  1/d_controlFrequency. <b>IMPORTANT: Do not alter this value.</b> Default is 0.001 Note: If a configuration file is present, this value will be automatically  set from it, immediately before <a class="el" href="class_ControlProgram.html#b2">startControl</a>() is called.
<p>
<b>Example:</b>
<p>
<div class="fragment"><pre>     velocity = (currentPosition - previousPosition) / d_controlPeriod;</div></pre>     </td>
  </tr>
</table>
<a name="m2" doxytag="ControlProgram::d_controlDuration"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
double d_controlDuration
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Control duration in seconds. This value will be ignored if d_runForever  is "1". Set this value in <a class="el" href="class_ControlProgram.html#b0">enterControl</a>(). Default is "5". Note: If a configuration file is present, this value will be automatically  set from it, immediately before <a class="el" href="class_ControlProgram.html#b2">startControl</a>() is called.
<p>
<b>Example:</b>
<p>
<div class="fragment"><pre>     d_runForever = 0;
     d_controlDuration = 1;</div></pre>     </td>
  </tr>
</table>
<a name="m3" doxytag="ControlProgram::d_runForever"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int d_runForever
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set this to "1" to continuously execute control, otherwise set it to "0"  (the value d_controlDuration will then be used). Set this value in  enterControl. Default is "0". Note: If a configuration file is present, this value will be automatically  set from it, immediately before <a class="el" href="class_ControlProgram.html#b2">startControl</a>() is called.
<p>
<b>Example:</b>
<p>
<div class="fragment"><pre>     d_runForever = 1;</div></pre>     </td>
  </tr>
</table>
<a name="m4" doxytag="ControlProgram::d_elapsedTime"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
double d_elapsedTime
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This is the elapsed time since the control has been started (in  seconds).
<p>
<b>Example:</b> <br>

<p>
<div class="fragment"><pre>     <font class="keywordtype">void</font> <a class="code" href="class_ControlProgram.html#b3">control</a>()<font class="keyword"></font>
<font class="keyword">     </font>{
       <font class="comment">// Create a sine wave as desired trajectory</font>
       qd = sin(d_elaspedTime);
     }</div></pre>     </td>
  </tr>
</table>
<a name="m5" doxytag="ControlProgram::d_elapsedTicks"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int d_elapsedTicks
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This is the number of elapsed ticks (control cycles) since the control  has been started.     </td>
  </tr>
</table>
<a name="m6" doxytag="ControlProgram::d_config"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
Config d_config
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The object that contains the configuration. The configuration is loaded  from a configuration file right after <a class="el" href="class_ControlProgram.html#b0">enterControl</a>() has been called (if  a configuration file exists). In the configuration file, control  parameters, log settings, and other settings are specified. Use this  object in your derived class, in <a class="el" href="class_ControlProgram.html#b1">readConfiguration</a>(), to get additional  settings you specified in the configuration file. Please refer to the  documentation on the Config class in the QRTS Utility Class Manual for  further information.     </td>
  </tr>
</table>
<a name="m7" doxytag="ControlProgram::d_cmdLine"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
CmdLineArgs d_cmdLine
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The object that contains the command line. This data member only  contains the correct command line, if the correct argc and argv parameters from main() are passed to the ControlProgram constructor.  This data member can be used to determine custom command line parameters  for standalone control programs. Please refer to the documentation on  the CmdLineArgs class for further information.     </td>
  </tr>
</table>
<a name="m8" doxytag="ControlProgram::d_standAloneMode"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int d_standAloneMode
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Is 1 if the control was started from the command line, not from the QMotor GUI.     </td>
  </tr>
</table>
<a name="m9" doxytag="ControlProgram::d_messageStream"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
ostream d_messageStream
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Use this stream to output messages to the user. By using this stream, messages will automatically be output to the  terminal (in standalone mode) or to the GUI (when using the GUI).
<p>
<b>Example</b>
<p>
<div class="fragment"><pre>     d_messageStream &lt;&lt; <font class="stringliteral">"Please set the control mode before starting the control."</font>
                     &lt;&lt; endl;</div></pre>     </td>
  </tr>
</table>
<a name="m10" doxytag="ControlProgram::d_debugStream"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
ostream d_debugStream
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Use this stream to output debug messages to the user. The messages are only printed to the terminal, if the control program was started with the <code> "-debugmessages" </code> command line switch.
<p>
<b>Example</b>
<p>
<div class="fragment"><pre>     d_debugStream &lt;&lt; <font class="stringliteral">"Control gain: "</font> &lt;&lt; kp &lt;&lt; endl;</div></pre>     </td>
  </tr>
</table>
<a name="m11" doxytag="ControlProgram::d_applicationName"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
char * d_applicationName
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
These are the functions that the user needs to implement in the derived  class in order to implement a control routine. Not all functions need to  be defined, but typically <a class="el" href="class_ControlProgram.html#b0">enterControl</a>(), <a class="el" href="class_ControlProgram.html#b2">startControl</a>(), <a class="el" href="class_ControlProgram.html#b3">control</a>(), and  endControl() are defined.     </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="ControlProgram_hpp-source.html">ControlProgram.hpp</a></ul>
</body>
</html>
