<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>DefaultManipulator.hpp Source File</title>
<link href="stylesheet.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.3 on Thu Jul 19 13:03:27 2001 -->
<h1>DefaultManipulator.hpp</h1><div class="fragment"><pre>00001   
00002 
00003 <font class="preprocessor">#ifndef INCLUDED_DefaultManipulator_hpp</font>
00004 <font class="preprocessor"></font><font class="preprocessor">#define INCLUDED_DefaultManipulator_hpp</font>
00005 <font class="preprocessor"></font>  
00006 
00007 
00008 <font class="preprocessor">#include &lt;pthread.h&gt;</font>
00009 
00010 
00011 <font class="preprocessor">#include "RoboticPlatform.hpp"</font>
00012 <font class="preprocessor">#include "RoboticObject.hpp"</font>
00013 <font class="preprocessor">#include "PhysicalObject.hpp"</font>
00014 <font class="preprocessor">#include "DefaultPositionControl.hpp"</font>
00015 <font class="preprocessor">#include "VectorBase.hpp"</font>
00016 <font class="preprocessor">#include "OpenArchitectureManipulator.hpp"</font>
00017 <font class="preprocessor">#include "ManipulatorModel.hpp"</font>
00018 <font class="preprocessor">#include "Vector.hpp"</font>
00019 <font class="preprocessor">#include "Transform.hpp"</font>
00020 <font class="preprocessor">#include "Differentiator.hpp"</font>
00021 <font class="preprocessor">#include "Integrator.hpp"</font>
00022 <font class="preprocessor">#include "LowpassFilter.hpp"</font>
00023 <font class="preprocessor">#include "Server.hpp"</font>
00024 <font class="preprocessor">#include "Client.hpp"</font>
00025 <font class="preprocessor">#include "ControlProgram.hpp"</font>
00026 <font class="preprocessor">#include "IOBoardClient.hpp"</font>
00027 <font class="preprocessor">#include "ObjectMessageDialog.hpp"</font>
00028 
00029 
00030   
00049 template &lt;int numJoints&gt;
00050 <font class="keyword">class </font><a class="code" href="class_DefaultManipulator.html">DefaultManipulator</a> : <font class="keyword">public</font> <a class="code" href="class_OpenArchitectureManipulator.html">OpenArchitectureManipulator</a>,
00051                                                       <font class="keyword">public</font> <a class="code" href="class_ControlProgram.html">ControlProgram</a>
00052 {
00053 
00054   <font class="keyword">protected</font>:
00055     <font class="keyword">typedef</font> <a class="code" href="class_OpenArchitectureManipulator.html">OpenArchitectureManipulator</a> <a class="code" href="class_Gripper.html">Parent</a>;
00056     
00057     <font class="keyword">protected</font>:
00058     <a class="code" href="class_DefaultManipulator.html#b0">DefaultManipulator</a>(<font class="keyword">const</font> <a class="code" href="class_TypeInfo.html">TypeInfo</a> *<a class="code" href="class_Manipulator.html">parent</a>);
00064   <font class="keyword">public</font>:
00065     <font class="keyword">virtual</font> <a class="code" href="class_DefaultManipulator.html#a0">~DefaultManipulator</a>();
00069     <font class="keyword">public</font>:     
00070     <font class="keyword">static</font> <a class="code" href="class_TypeInfoAbstractT.html">TypeInfoAbstractT&lt;DefaultManipulator&gt;</a> s_typeInfo;
00076     <font class="keyword">virtual</font> <font class="keyword">const</font> <a class="code" href="class_TypeInfo.html">TypeInfo</a> *<a class="code" href="class_OpenArchitectureManipulator.html#a1">getTypeInfo</a>() <font class="keyword">const</font>;
00081   <font class="keyword">public</font>:
00082     <a class="code" href="class_Vector.html">Vector&lt;numJoints&gt;</a> <a class="code" href="class_Manipulator.html#a4">getCurrentJointPosition</a>();
00089     <a class="code" href="class_Vector.html">Vector&lt;numJoints&gt;</a> <a class="code" href="class_Manipulator.html#a5">getDesiredJointPosition</a>();
00094     <font class="keyword">virtual</font> <a class="code" href="class_Vector.html">Vector&lt;numJoints&gt;</a> <a class="code" href="class_DefaultManipulator.html#a4">readJointPosition</a>();
00100     <font class="keyword">virtual</font> <a class="code" href="class_Vector.html">Vector&lt;numJoints&gt;</a> <a class="code" href="class_DefaultManipulator.html#a5">convertJointOutputToMotorOutput</a>(
00101                                                                 <font class="keyword">const</font> <a class="code" href="class_Vector.html">Vector&lt;numJoints&gt;</a> &amp;jointOutput);
00113     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_DefaultManipulator.html#a6">reset</a>();
00121   <font class="keyword">public</font>:
00122     
00123     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_PhysicalObject.html#b4">readGlobalConfiguration</a>(Config *config);
00128     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_PhysicalObject.html#a3">setSimulationModeOn</a>();
00134     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_PhysicalObject.html#a4">setSimulationModeOff</a>();
00142     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_Manipulator.html#a2">outputInfo</a>(ostream &amp;stream = cout);
00150     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_Manipulator.html#a26">createControlPanel</a>(<font class="keywordtype">bool</font> realizeFlag = <font class="keyword">true</font>);
00156   <font class="keyword">protected</font>:    
00157     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_Manipulator.html#b1">updateGUI</a>();
00161   <font class="keyword">public</font>:
00162 
00163     <font class="keyword">virtual</font> <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_Manipulator.html#a3">getNumJoints</a>();
00168     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_Manipulator.html#a4">getCurrentJointPosition</a>(<a class="code" href="class_VectorBase.html">VectorBase&lt;&gt;</a> &amp;currentJointPosition);
00176     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_Manipulator.html#a5">getDesiredJointPosition</a>(<a class="code" href="class_VectorBase.html">VectorBase&lt;&gt;</a> &amp;desiredJointPosition);
00184     <font class="keyword">virtual</font> <font class="keywordtype">double</font> <a class="code" href="class_Manipulator.html#a4">getCurrentJointPosition</a>(<font class="keywordtype">int</font> jointNumber);
00190     <font class="keyword">virtual</font> <font class="keywordtype">double</font> <a class="code" href="class_Manipulator.html#a5">getDesiredJointPosition</a>(<font class="keywordtype">int</font> jointNumber);
00196     <font class="keyword">virtual</font> <a class="code" href="class_Transform.html">Transform</a> <a class="code" href="class_Manipulator.html#a8">getCurrentEndEffectorTransform</a>();
00203     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_DefaultManipulator.html#a18">getCurrentJointVelocity</a>(<a class="code" href="class_VectorBase.html">VectorBase&lt;&gt;</a> &amp;jointVelocity);
00208     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_DefaultManipulator.html#a19">getCurrentJointAcceleration</a>(<a class="code" href="class_VectorBase.html">VectorBase&lt;&gt;</a>
00209                                                                                      &amp;jointAcceleration);
00215     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_Manipulator.html#a9">getDefaultJointVelocity</a>(<a class="code" href="class_VectorBase.html">VectorBase&lt;&gt;</a> 
00216                                 &amp;jointVelocity) <font class="keyword">const</font>;
00222     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_Manipulator.html#a10">getDefaultJointAcceleration</a>(<a class="code" href="class_VectorBase.html">VectorBase&lt;&gt;</a>
00223                                                                                      &amp;jointAcceleration) <font class="keyword">const</font>;
00231     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_Manipulator.html#a11">calibrateJointPosition</a>(<font class="keyword">const</font> <a class="code" href="class_VectorBase.html">VectorBase&lt;&gt;</a> &amp;jointPosition);
00245     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_Manipulator.html#a12">setDesiredJointPosition</a>(<font class="keyword">const</font> <a class="code" href="class_VectorBase.html">VectorBase&lt;&gt;</a>
00246                                                                              &amp;desiredJointPosition);
00257     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_Manipulator.html#a13">setDesiredEndEffectorTransform</a>(
00258                                                          <a class="code" href="class_Transform.html">Transform</a> &amp;desiredEndEffectorTransform);
00266     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_Manipulator.html#a23">setTrajectoryGenerator</a>(
00267                                                  <a class="code" href="class_TrajectoryGenerator.html">TrajectoryGenerator</a> &amp;trajectoryGenerator);
00287     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_Manipulator.html#a14">enableArmPower</a>();
00299     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_Manipulator.html#a15">disableArmPower</a>();
00311     <font class="keyword">virtual</font> <font class="keywordtype">bool</font> <a class="code" href="class_Manipulator.html#a16">isArmPowerEnabled</a>();
00317     <font class="keyword">virtual</font> <a class="code" href="class_VectorBase.html">VectorBase&lt;&gt;</a> *<a class="code" href="class_Manipulator.html#a17">createJointVector</a>();
00324     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_Manipulator.html#a18">setTeachModeOn</a>();
00330     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_Manipulator.html#a19">setTeachModeOff</a>();
00334     <font class="keyword">virtual</font> <font class="keywordtype">bool</font> <a class="code" href="class_Manipulator.html#a20">isTeachModeOn</a>();
00341     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_OpenArchitectureManipulator.html#a9">setJointControlOutput</a>(<font class="keyword">const</font> <a class="code" href="class_VectorBase.html">VectorBase&lt;&gt;</a> &amp;controlOutput);
00350     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_OpenArchitectureManipulator.html#a9">setJointControlOutput</a>(<font class="keywordtype">int</font> jointnumber, <font class="keywordtype">double</font> controlOutput);
00360     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_OpenArchitectureManipulator.html#a11">getJointControlOutput</a>(<a class="code" href="class_VectorBase.html">VectorBase&lt;&gt;</a> &amp;controlOutput);
00368     <font class="keyword">virtual</font> <font class="keywordtype">double</font> <a class="code" href="class_OpenArchitectureManipulator.html#a8">getControlPeriod</a>();
00373 <font class="keyword">private</font>:
00374 
00375     <font class="keywordtype">void</font> checkJointLimits();
00381     <font class="keywordtype">void</font> checkTorqueLimits();
00389 <font class="keyword">public</font>:
00390 
00391     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_DefaultManipulator.html#a37">setGravityCompensationOn</a>();
00401     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_DefaultManipulator.html#a38">setGravityCompensationOff</a>();
00408     <font class="keywordtype">bool</font> <a class="code" href="class_DefaultManipulator.html#a39">isGravityCompensationOn</a>();
00414     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_DefaultManipulator.html#a40">setFrictionCompensationOn</a>();
00428     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_DefaultManipulator.html#a41">setFrictionCompensationOff</a>();
00435     <font class="keywordtype">bool</font> <a class="code" href="class_DefaultManipulator.html#a42">isFrictionCompensationOn</a>();
00441     <font class="keywordtype">void</font> <a class="code" href="class_DefaultManipulator.html#a43">setDynamicSimulationOn</a>();
00449     <font class="keywordtype">void</font> <a class="code" href="class_DefaultManipulator.html#a44">setDynamicSimulationOff</a>();
00453     <font class="keywordtype">bool</font> <a class="code" href="class_DefaultManipulator.html#a45">isDynamicSimulationOn</a>();
00458     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_RoboticObject.html#a7">startShutdown</a>();
00467     <font class="keyword">virtual</font> <font class="keywordtype">int</font> <a class="code" href="class_ControlProgram.html#b0">enterControl</a>();
00474     <font class="keyword">virtual</font> <font class="keywordtype">int</font> <a class="code" href="class_ControlProgram.html#b2">startControl</a>();
00481     <font class="keyword">virtual</font> <font class="keywordtype">int</font> <a class="code" href="class_ControlProgram.html#b5">stopControl</a>();
00487     <font class="keyword">virtual</font> <font class="keywordtype">int</font> <a class="code" href="class_ControlProgram.html#b3">control</a>();
00493     <font class="keyword">virtual</font> <font class="keywordtype">int</font> <a class="code" href="class_ControlProgram.html#b7">handleMessage</a>(pid_t clientPid, <font class="keywordtype">char</font> *messageBuffer);
00501 <font class="keyword">public</font>:
00502       
00506   <font class="keyword">enum</font>
00507     {
00508         e_getJointPosition = 200,
00509         e_calibrateJointPosition,
00510         e_setDesiredJointPosition,
00511         e_setDesiredEndEffectorTransform,
00512         e_getDesiredJointPosition,
00513         e_getJointVelocity,
00514         e_getJointAcceleration,
00515         e_getJointOutput,
00516         e_setJointOutput,
00517         e_reset,
00518         e_init
00519 
00522   };
00523 
00524 <font class="keyword">protected</font>:  
00525 
00526       
00527     <font class="keyword">virtual</font> <a class="code" href="class_ControlProgram.html">ControlProgram</a> *<a class="code" href="class_RoboticObject.html#b7">getQMotorControlProgram</a>();
00532     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_DefaultManipulator.html#b3">localInit</a>();
00537     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_PhysicalObject.html#b3">finishInit</a>();
00542 <font class="keyword">protected</font>:
00543   
00544     <font class="keywordtype">int</font> d_encoderStartChannel;
00548     <font class="keywordtype">int</font> d_dacStartChannel;
00553     <font class="keywordtype">int</font> d_armPowerDigitalOutChannel;
00558     <font class="keywordtype">int</font> d_armPowerDigitalInChannel;
00563     <font class="keywordtype">int</font> d_armPowerDigitalInValue;
00568     <font class="keywordtype">int</font> d_armPowerDigitalOutValue;
00573     <a class="code" href="class_Vector.html">Vector&lt;numJoints&gt;</a> d_encoderCountPerRadian;
00579     <a class="code" href="class_Vector.html">Vector&lt;numJoints&gt;</a> d_radiansAtZeroEncoder;
00583     <a class="code" href="class_Vector.html">Vector&lt;numJoints&gt;</a> d_encoderPosition;
00587     <a class="code" href="class_Vector.html">Vector&lt;numJoints&gt;</a> d_torqueToVoltageFactor;
00593     <a class="code" href="class_Vector.html">Vector&lt;numJoints&gt;</a> d_desiredJointPosition;
00598     <a class="code" href="class_Transform.html">Transform</a> d_desiredEndEffectorTransform;
00603     <a class="code" href="class_Vector.html">Vector&lt;numJoints&gt;</a> d_defaultJointVelocity;
00608     <a class="code" href="class_Vector.html">Vector&lt;numJoints&gt;</a> d_desiredJointVelocity;
00613     <a class="code" href="class_Vector.html">Vector&lt;numJoints&gt;</a> d_defaultJointAcceleration;
00618     <a class="code" href="class_Vector.html">Vector&lt;numJoints&gt;</a> d_desiredJointAcceleration;
00623     <font class="keywordtype">double</font> d_velocityFilterCutOffFrequencyHz;
00627     <font class="keywordtype">double</font> d_accelerationFilterCutOffFrequencyHz;
00631     <font class="keywordtype">double</font> d_velocityFilterDampingRatio;
00635     <font class="keywordtype">double</font> d_accelerationFilterDampingRatio;
00639     <font class="keywordtype">double</font> d_desiredVelocityFilterCutOffFrequencyHz;
00643     <font class="keywordtype">double</font> d_desiredAccelerationFilterCutOffFrequencyHz;
00647     <font class="keywordtype">double</font> d_desiredVelocityFilterDampingRatio;
00651     <font class="keywordtype">double</font> d_desiredAccelerationFilterDampingRatio;
00655     <a class="code" href="class_IOBoardClient.html">IOBoardClient</a> *d_ioBoardClient;
00659     <font class="keyword">const</font> <font class="keywordtype">char</font> *d_ioBoardServerName;
00664 };
00665 <font class="preprocessor">#undef RP_DEBUG</font>
00666 <font class="preprocessor"></font><font class="preprocessor">#endif</font>
</font></div></pre></body>
</html>
