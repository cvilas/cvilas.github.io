<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>QMath Matrix Library: Differentiator&lt; T &gt; Class Template Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6 -->
<div class="tabs">
  <ul>
    <li><a href="index.htm"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="annotated.htm"><span>Classes</span></a></li>
    <li><a href="files.htm"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.htm"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.htm"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.htm"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>Differentiator&lt; T &gt; Class Template Reference</h1><!-- doxytag: class="Differentiator" -->This is the base class for differentiators.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="Differentiator_8hpp-source.htm">Differentiator.hpp</a>&gt;</code>
<p>
<p>Inheritance diagram for Differentiator&lt; T &gt;:
<p><center><img src="classDifferentiator.png" usemap="#Differentiator< T >_map" border="0" alt=""></center>
<map name="Differentiator< T >_map">
<area href="classDifferentiator4O.htm" alt="Differentiator4O< T >" shape="rect" coords="0,56,134,80">
</map>
<a href="classDifferentiator-members.htm">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDifferentiator.htm#709bf21be67174cbaae01da96c9fdb06">Differentiator</a> (double period=0.001)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDifferentiator.htm#1d20716afdc3e3ddfb7eb3746a938cbe">~Differentiator</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDifferentiator.htm#18f1abf543dad7a38ba2d8551d2b461d">setSamplingPeriod</a> (double period)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDifferentiator.htm#90476e1696fe4c2862711ff994f5f8e3">setCutOffFrequencyHz</a> (double f)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDifferentiator.htm#cb2b0ac91095fc97874a1e86497ecedc">setCutOffFrequencyRad</a> (double cutOffFrequencyRad)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDifferentiator.htm#89f4945ad79e58b61bc7a64f604e4ea4">setDampingRatio</a> (double d)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDifferentiator.htm#d610fea5d4b51f9d704fae6898a0dd13">disableFilter</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDifferentiator.htm#cc9e88bf6068f05e51458ee7d9db988b">enableFilter</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDifferentiator.htm#a4b18a6a407b498f087620e80ed85205">reset</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual T&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDifferentiator.htm#6cd86aca9edbfda7797576f6cc9e08db">differentiate</a> (const T &amp;input)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;class T = double&gt;<br>
 class Differentiator&lt; T &gt;</h3>

This is the base class for differentiators. 
<p>
This class implements numerical differentation using backward difference followed by low-pass filtering.<p>
The <a class="el" href="classDifferentiator.htm">Differentiator</a> performs numerical differentiation of a signal using backward difference, followed by smoothening of the differentiated signal by a 2nd order butterworth low pass filter. The filtering is usually required due to the noisy nature of the result of numerical differentiation. Unfortunately low pass filter also introduces lag and innacuracy to the result. Filtering action should be disabled using <a class="el" href="classDifferentiator.htm#d610fea5d4b51f9d704fae6898a0dd13">disableFilter()</a> if your input signal is sufficiently smooth.<p>
A derived class from <a class="el" href="classDifferentiator.htm">Differentiator</a> can override the differenting algorithm provided.The class <code><a class="el" href="classDifferentiator.htm">Differentiator</a></code> can be used with many data types (double, int, <a class="el" href="classRowVector.htm">RowVector</a>, <a class="el" href="classColumnVector.htm">ColumnVector</a>, <a class="el" href="classMatrix.htm">Matrix</a>, etc).<p>
<b>Example Program:</b> <div class="fragment"><pre class="fragment"><span class="comment">//======================================================================== </span>
<span class="comment">// Package                      : The Math Library - Ex</span>
<span class="comment">// Authors                      : Vilas Kumar Chitrakaran</span>
<span class="comment">// Start Date           : Wed Dec 20 11:08:28 GMT 2000</span>
<span class="comment">// Compiler                     : GNU C++ 2.95.3 and above</span>
<span class="comment">// ----------------------------------------------------------------------</span>
<span class="comment">// File: Differentiator.t.cpp</span>
<span class="comment">// Example program for the Differentiator.</span>
<span class="comment">//========================================================================</span>

<span class="comment">//========================================================================</span>
<span class="comment">//Differentiator.t.cpp</span>
<span class="comment">//------------------------------------------------------------------------</span>
<span class="comment">// Demonstration of Differentiator class. The numerical differentiation</span>
<span class="comment">// result is compared with analytical solution.</span>
<span class="comment">//========================================================================</span>

<span class="preprocessor">#include "<a class="code" href="Differentiator_8hpp.htm">Differentiator.hpp</a>"</span>
<span class="preprocessor">#include "<a class="code" href="ColumnVector_8hpp.htm">ColumnVector.hpp</a>"</span>
<span class="preprocessor">#include &lt;stdio.h&gt;</span>

<span class="keywordtype">int</span> main()
{
 FILE *outfile;  <span class="comment">// This file holds the input and output waveforms.</span>
 outfile = fopen(<span class="stringliteral">"Differentiator.dat"</span>, <span class="stringliteral">"w+"</span>);
 
 <span class="keywordtype">double</span> input;             <span class="comment">// input signal</span>
 <span class="keywordtype">double</span> output_numerical;  <span class="comment">// numerically computed derivative</span>
 <span class="keywordtype">double</span> output_actual;     <span class="comment">// analytically computed derivative</span>
 <span class="keywordtype">double</span> <a class="code" href="MathException_8hpp.htm#c32e48e8c811a7a18c72f86216150be1">error</a>;             <span class="comment">// error between numerical and analytical results</span>
 <span class="keywordtype">double</span> samplingPeriod;
 
 <span class="comment">// Create Differentiator with a sampling period of 1 milli-second.</span>
 samplingPeriod = 0.001;
 <a class="code" href="classDifferentiator.htm">Differentiator&lt;double&gt;</a> differentiator(samplingPeriod);
 
 <span class="comment">// Set filter parameters.</span>
 differentiator.setCutOffFrequencyHz(500);
 differentiator.setDampingRatio(1);
 differentiator.reset();

 fprintf(outfile, <span class="stringliteral">"%s\n%s %s %s %s\n"</span>, <span class="stringliteral">"%Differentiator output file"</span>,
         <span class="stringliteral">"%input"</span>, <span class="stringliteral">"output_actual"</span>, <span class="stringliteral">"output_numerical"</span>, <span class="stringliteral">"error"</span> );
 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 1.0/samplingPeriod; i++)
 {      
  input = cos(2*<a class="code" href="HighpassFilter_8hpp.htm#e71449b1cc6e6250b91f539153a7a0d3">M_PI</a>*i*samplingPeriod); <span class="comment">// 1 Hz signal</span>

  <span class="comment">// Differentiate analytically and numerically</span>
  output_actual = -(2 * <a class="code" href="HighpassFilter_8hpp.htm#e71449b1cc6e6250b91f539153a7a0d3">M_PI</a>) * sin(2*<a class="code" href="HighpassFilter_8hpp.htm#e71449b1cc6e6250b91f539153a7a0d3">M_PI</a>*i*samplingPeriod);
  output_numerical = differentiator.differentiate(input); 
  
  error = output_actual - output_numerical;
  
  <span class="comment">// write the outputs to a file... </span>
  fprintf(outfile, <span class="stringliteral">"%f %f %f %f\n"</span>, input, output_actual, output_numerical, error);
 }
 fclose(outfile);
 <span class="keywordflow">return</span>(0);
}


</pre></div> 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="709bf21be67174cbaae01da96c9fdb06"></a><!-- doxytag: member="Differentiator::Differentiator" ref="709bf21be67174cbaae01da96c9fdb06" args="(double period=0.001)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="mdPrefix" colspan="4">
template&lt;class T = double&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classDifferentiator.htm">Differentiator</a>&lt; T &gt;::<a class="el" href="classDifferentiator.htm">Differentiator</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">double&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>period</em> = <code>0.001</code>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The Constructor initializes. The low pass filter is enabled by default, the cut-off frequency is set to half the sampling frequency and damping ratio of the low-pass filter in the differentiator is set to 1. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>period</em>&nbsp;</td><td>The sampling period of the differentiator in seconds. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="1d20716afdc3e3ddfb7eb3746a938cbe"></a><!-- doxytag: member="Differentiator::~Differentiator" ref="1d20716afdc3e3ddfb7eb3746a938cbe" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="mdPrefix" colspan="4">
template&lt;class T = double&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top">virtual <a class="el" href="classDifferentiator.htm">Differentiator</a>&lt; T &gt;::~<a class="el" href="classDifferentiator.htm">Differentiator</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The default destructor.     </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="18f1abf543dad7a38ba2d8551d2b461d"></a><!-- doxytag: member="Differentiator::setSamplingPeriod" ref="18f1abf543dad7a38ba2d8551d2b461d" args="(double period)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="mdPrefix" colspan="4">
template&lt;class T = double&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top">void <a class="el" href="classDifferentiator.htm">Differentiator</a>&lt; T &gt;::setSamplingPeriod           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">double&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>period</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the sampling period of the differentiator     </td>
  </tr>
</table>
<a class="anchor" name="90476e1696fe4c2862711ff994f5f8e3"></a><!-- doxytag: member="Differentiator::setCutOffFrequencyHz" ref="90476e1696fe4c2862711ff994f5f8e3" args="(double f)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="mdPrefix" colspan="4">
template&lt;class T = double&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top">void <a class="el" href="classDifferentiator.htm">Differentiator</a>&lt; T &gt;::setCutOffFrequencyHz           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">double&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>f</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Differentiation is followed by a low pass filtering process. This function sets the cut-off frequency of the filter in <em>hertz</em>.     </td>
  </tr>
</table>
<a class="anchor" name="cb2b0ac91095fc97874a1e86497ecedc"></a><!-- doxytag: member="Differentiator::setCutOffFrequencyRad" ref="cb2b0ac91095fc97874a1e86497ecedc" args="(double cutOffFrequencyRad)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="mdPrefix" colspan="4">
template&lt;class T = double&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top">void <a class="el" href="classDifferentiator.htm">Differentiator</a>&lt; T &gt;::setCutOffFrequencyRad           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">double&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>cutOffFrequencyRad</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Differentiation is followed by a low pass filtering process. This function sets the cut-off frequency of the filter in <em>rad/sec</em>.     </td>
  </tr>
</table>
<a class="anchor" name="89f4945ad79e58b61bc7a64f604e4ea4"></a><!-- doxytag: member="Differentiator::setDampingRatio" ref="89f4945ad79e58b61bc7a64f604e4ea4" args="(double d)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="mdPrefix" colspan="4">
template&lt;class T = double&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top">void <a class="el" href="classDifferentiator.htm">Differentiator</a>&lt; T &gt;::setDampingRatio           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">double&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>d</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the damping factor of the butterworth filter.     </td>
  </tr>
</table>
<a class="anchor" name="d610fea5d4b51f9d704fae6898a0dd13"></a><!-- doxytag: member="Differentiator::disableFilter" ref="d610fea5d4b51f9d704fae6898a0dd13" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="mdPrefix" colspan="4">
template&lt;class T = double&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top">void <a class="el" href="classDifferentiator.htm">Differentiator</a>&lt; T &gt;::disableFilter           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Disable the low pass filtering after the differentiation. (Low pass filter is enabled by default.)     </td>
  </tr>
</table>
<a class="anchor" name="cc9e88bf6068f05e51458ee7d9db988b"></a><!-- doxytag: member="Differentiator::enableFilter" ref="cc9e88bf6068f05e51458ee7d9db988b" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="mdPrefix" colspan="4">
template&lt;class T = double&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top">void <a class="el" href="classDifferentiator.htm">Differentiator</a>&lt; T &gt;::enableFilter           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Enable the low pass filtering after the differentiation.     </td>
  </tr>
</table>
<a class="anchor" name="a4b18a6a407b498f087620e80ed85205"></a><!-- doxytag: member="Differentiator::reset" ref="a4b18a6a407b498f087620e80ed85205" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="mdPrefix" colspan="4">
template&lt;class T = double&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top">void <a class="el" href="classDifferentiator.htm">Differentiator</a>&lt; T &gt;::reset           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Resets the differentiator output to zero. 
<p>
Reimplemented in <a class="el" href="classDifferentiator4O.htm#a5ec2ecd4e77b9406a1c552f724ef082">Differentiator4O&lt; T &gt;</a>.    </td>
  </tr>
</table>
<a class="anchor" name="6cd86aca9edbfda7797576f6cc9e08db"></a><!-- doxytag: member="Differentiator::differentiate" ref="6cd86aca9edbfda7797576f6cc9e08db" args="(const T &amp;input)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="mdPrefix" colspan="4">
template&lt;class T = double&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top">virtual T <a class="el" href="classDifferentiator.htm">Differentiator</a>&lt; T &gt;::differentiate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const T &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>input</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function implements the numerical method for differentiation. The user can derive a different method of differentiation in a derived class. The differentiator output in the first cycle is smoothened to zero. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>input</em>&nbsp;</td><td>The current value of the signal being differentiated. </td></tr>
  </table>
</dl>

<p>
Reimplemented in <a class="el" href="classDifferentiator4O.htm#b322fef3ce143d58cd64db4ee41fe744">Differentiator4O&lt; T &gt;</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="Differentiator_8hpp-source.htm">Differentiator.hpp</a></ul>
<hr>
Created for project <code><font color="red"><b>QMath Matrix Library</b></font></code> on Mon Sep 11 14:52:24 EDT 2006
<br>
 for Vilas Kumar Chitrakaran (cvilas(@)ces.clemson.edu). 
<br>
Documentation generated using <a href=http://www.doxygen.org>Doxygen</a>
.
</body>
</html>
